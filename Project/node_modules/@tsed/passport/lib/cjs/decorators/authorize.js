"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Authorize = void 0;
const platform_middlewares_1 = require("@tsed/platform-middlewares");
const core_1 = require("@tsed/core");
const schema_1 = require("@tsed/schema");
const PassportMiddleware_1 = require("../middlewares/PassportMiddleware");
function Authorize(protocol = "*", options = {}) {
    return (0, core_1.useDecorators)((0, platform_middlewares_1.UseAuth)(PassportMiddleware_1.PassportMiddleware, {
        protocol,
        method: "authorize",
        originalUrl: options.originalUrl === undefined ? true : options.originalUrl,
        options
    }), ...Object.entries(options.security || {}).map(([key, value]) => {
        return (0, schema_1.Security)(key, ...value);
    }));
}
exports.Authorize = Authorize;
//# sourceMappingURL=authorize.js.map