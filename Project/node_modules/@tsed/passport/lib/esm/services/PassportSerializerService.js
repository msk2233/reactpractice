import { __decorate, __metadata } from "tslib";
import { Constant, Service } from "@tsed/di";
import { deserialize, serialize } from "@tsed/json-mapper";
import { UserInfo } from "../domain/UserInfo.js";
/**
 * @ignore
 */
let PassportSerializerService = class PassportSerializerService {
    model;
    serialize(user, done) {
        try {
            const obj = serialize(user, { type: this.model });
            // remove password from serialized object
            obj.password = undefined;
            done(null, JSON.stringify(obj));
        }
        catch (er) {
            // istanbul ignore next
            done(er);
        }
    }
    deserialize(obj, done) {
        try {
            const user = deserialize(JSON.parse(obj), { type: this.model });
            done(null, user);
        }
        catch (er) {
            done(er);
        }
    }
};
__decorate([
    Constant("passport.userInfoModel", UserInfo),
    __metadata("design:type", Object)
], PassportSerializerService.prototype, "model", void 0);
PassportSerializerService = __decorate([
    Service()
], PassportSerializerService);
export { PassportSerializerService };
//# sourceMappingURL=PassportSerializerService.js.map