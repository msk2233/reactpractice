import { isArray } from "@tsed/core";
/**
 * @ignore
 */
function getProtocolName(req) {
    const { query = {}, params = {}, body = {} } = req;
    return params.protocol || query.protocol || body.protocol;
}
/**
 * @ignore
 */
export function getProtocolsFromRequest(req, protocol, defaultProtocols) {
    if (!isArray(protocol)) {
        if (protocol === "*") {
            return defaultProtocols;
        }
        const protocolReq = getProtocolName(req);
        if (protocol === ":protocol") {
            return [protocolReq].filter(Boolean);
        }
        if (protocolReq && protocolReq !== protocol) {
            return [];
        }
        return [protocol];
    }
    const protocols = protocol;
    if (protocols.includes("*")) {
        return defaultProtocols;
    }
    return protocols;
}
//# sourceMappingURL=getProtocolsFromRequest.js.map