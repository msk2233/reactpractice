"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ensureContext = void 0;
const di_1 = require("@tsed/di");
function ensureContext(request, cb, fallback) {
    const $ctx = (0, di_1.getContext)();
    if ($ctx) {
        return cb($ctx);
    }
    if (!request?.$ctx && fallback) {
        return fallback();
    }
    return request.$ctx.runInContext(() => cb(request.$ctx));
}
exports.ensureContext = ensureContext;
//# sourceMappingURL=ensureContext.js.map