"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AnyToPromiseWithCtx = void 0;
const core_1 = require("@tsed/core");
class AnyToPromiseWithCtx extends core_1.AnyToPromise {
    $ctx;
    constructor($ctx) {
        super();
        this.$ctx = $ctx;
    }
    isDone() {
        const { $ctx } = this;
        return $ctx?.isDone() || super.isDone();
    }
    call(cb) {
        return super.call(() => cb(this));
    }
    destroy() {
        this.$ctx = null;
    }
    isCanceledResponse(process) {
        return process === this.$ctx.getResponse();
    }
}
exports.AnyToPromiseWithCtx = AnyToPromiseWithCtx;
//# sourceMappingURL=AnyToPromiseWithCtx.js.map