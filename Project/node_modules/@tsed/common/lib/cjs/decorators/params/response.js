"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Res = exports.Response = void 0;
const core_1 = require("@tsed/core");
const platform_params_1 = require("@tsed/platform-params");
const http_1 = require("http");
function getParamType(target, propertyKey, parameterIndex) {
    const type = core_1.Metadata.getOwnParamTypes(target, propertyKey)[parameterIndex];
    if ((0, core_1.isClass)(type)) {
        if ((0, core_1.nameOf)(type) === "PlatformResponse") {
            return { paramType: platform_params_1.ParamTypes.PLATFORM_RESPONSE, dataPath: "$ctx.response" };
        }
        if (type === http_1.ServerResponse) {
            return { paramType: platform_params_1.ParamTypes.NODE_RESPONSE, dataPath: "$ctx.response.res" };
        }
    }
    return { paramType: platform_params_1.ParamTypes.RESPONSE, dataPath: "$ctx.response.response" };
}
function Response() {
    return Res();
}
exports.Response = Response;
function Res() {
    return (target, propertyKey, parameterIndex) => {
        const { paramType, dataPath } = getParamType(target, propertyKey, parameterIndex);
        (0, platform_params_1.UseParam)({
            paramType,
            dataPath
        })(target, propertyKey, parameterIndex);
    };
}
exports.Res = Res;
//# sourceMappingURL=response.js.map