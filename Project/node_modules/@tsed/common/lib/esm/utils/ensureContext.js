import { getContext } from "@tsed/di";
export function ensureContext(request, cb, fallback) {
    const $ctx = getContext();
    if ($ctx) {
        return cb($ctx);
    }
    if (!request?.$ctx && fallback) {
        return fallback();
    }
    return request.$ctx.runInContext(() => cb(request.$ctx));
}
//# sourceMappingURL=ensureContext.js.map