/// <reference types="node" />
import { DIContext, DIContextOptions } from "@tsed/di";
import { PlatformHandlerMetadata } from "@tsed/platform-router";
import { EndpointMetadata } from "@tsed/schema";
import { IncomingMessage, ServerResponse } from "http";
import { IncomingEvent } from "../interfaces/IncomingEvent";
import { PlatformApplication } from "../services/PlatformApplication";
import { PlatformRequest } from "../services/PlatformRequest";
import { PlatformResponse } from "../services/PlatformResponse";
declare global {
    namespace TsED {
        interface Context extends PlatformContext {
        }
    }
}
export interface PlatformContextOptions extends DIContextOptions {
    event: IncomingEvent;
    ignoreUrlPatterns?: any[];
    endpoint?: EndpointMetadata;
}
export declare class PlatformContext<PReq extends PlatformRequest = PlatformRequest, PRes extends PlatformResponse = PlatformResponse> extends DIContext {
    #private;
    event: IncomingEvent;
    /**
     * The data return by the previous endpoint if you use multiple handler on the same route. By default data is empty.
     */
    data: any;
    /**
     * The error caught by the current handler
     */
    error?: unknown;
    /**
     *
     */
    next?: any;
    /**
     * The current @@PlatformResponse@@.
     */
    readonly response: PRes;
    /**
     * The current @@PlatformRequest@@.
     */
    readonly request: PReq;
    /**
     * The current @@EndpointMetadata@@ resolved by Ts.ED during the request.
     */
    endpoint: EndpointMetadata;
    /**
     * The current @@PlatformHandlerMetadata@@ resolved by Ts.ED during the request.
     */
    handlerMetadata: PlatformHandlerMetadata;
    constructor(options: PlatformContextOptions);
    get url(): string;
    get app(): PlatformApplication<TsED.Application>;
    start(): Promise<void>;
    finish(): Promise<void>;
    isFinished(): boolean;
    isDone(): any;
    /**
     * Return the framework request instance (Express, Koa, etc...)
     */
    getRequest<Req = any>(): Req;
    /**
     * Return the framework response instance (Express, Koa, etc...)
     */
    getResponse<Res = any>(): Res;
    /**
     * Get Node.js request
     */
    getReq(): IncomingMessage;
    /**
     * Get Node.js response
     */
    getRes(): ServerResponse;
    /**
     * Return the original application instance.
     */
    getApp<T = any>(): T;
}
