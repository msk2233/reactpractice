/// <reference types="node" />
import { Type } from "@tsed/core";
import { InjectorService, ProviderOpts, TokenProvider } from "@tsed/di";
import { PlatformLayer } from "@tsed/platform-router";
import type { IncomingMessage, ServerResponse } from "http";
import { Platform } from "../services/Platform";
import { PlatformAdapter, PlatformBuilderSettings } from "../services/PlatformAdapter";
import { PlatformApplication } from "../services/PlatformApplication";
/**
 * @platform
 */
export declare class PlatformBuilder<App = TsED.Application> {
    #private;
    static adapter: Type<PlatformAdapter<any>>;
    readonly name: string;
    protected startedAt: Date;
    protected current: Date;
    protected constructor(adapter: Type<PlatformAdapter<App>> | undefined, module: Type, settings: Partial<TsED.Configuration>);
    get injector(): InjectorService;
    get rootModule(): any;
    get app(): PlatformApplication<App>;
    get platform(): Platform;
    get adapter(): PlatformAdapter<App>;
    /**
     * Return the settings configured by the decorator @@Configuration@@.
     *
     * ```typescript
     * @Configuration({
     *    port: 8000,
     *    httpsPort: 8080,
     *    mount: {
     *      "/rest": "${rootDir}/controllers/**\/*.js"
     *    }
     * })
     * export class Server {
     *     $onInit(){
     *         console.log(this.settings); // {rootDir, port, httpsPort,...}
     *     }
     * }
     * ```
     *
     * @returns {PlatformConfiguration}
     */
    get settings(): import("@tsed/di").DIConfiguration;
    get logger(): import("@tsed/di").DILogger;
    get disableBootstrapLog(): any;
    static create<App = TsED.Application>(module: Type<any>, settings: PlatformBuilderSettings<App>): PlatformBuilder<App>;
    static build<App = TsED.Application>(module: Type<any>, { adapter, ...settings }: PlatformBuilderSettings<App>): PlatformBuilder<App>;
    /**
     * Bootstrap a server application
     * @param module
     * @param settings
     */
    static bootstrap<App = TsED.Application>(module: Type<any>, settings: PlatformBuilderSettings<App>): Promise<PlatformBuilder<App>>;
    callback(): (req: IncomingMessage, res: ServerResponse) => void;
    callback(req: IncomingMessage, res: ServerResponse): void;
    log(...data: any[]): any;
    /**
     * Add classes to the components list
     * @param classes
     */
    addComponents(classes: Type | Type[]): this;
    /**
     * Add classes decorated by @@Controller@@ to components container.
     *
     * ### Example
     *
     * ```typescript
     * @Controller('/ctrl')
     * class MyController{
     * }
     *
     * platform.addControllers('/rest', [MyController])
     * ```
     *
     * ::: tip
     * If the MyController class isn't decorated, the class will be ignored.
     * :::
     *
     * @param {string} endpoint
     * @param {any[]} controllers
     */
    addControllers(endpoint: string, controllers: TokenProvider | TokenProvider[]): void;
    runLifecycle(): Promise<this>;
    loadInjector(): Promise<void>;
    listen(network?: boolean): Promise<void>;
    stop(): Promise<void>;
    ready(): Promise<void>;
    callHook(hook: string, ...args: any[]): Promise<void>;
    loadStatics(hook: string): void;
    useProvider(token: Type<any>, settings?: Partial<ProviderOpts>): this;
    bootstrap(): Promise<this>;
    protected mapRouters(): Promise<void>;
    protected diff(): string;
    /**
     * Load middlewares from configuration for the given hook
     * @param hook
     * @protected
     */
    protected loadMiddlewaresFor(hook: string): void;
    protected createHttpServers(): void;
    protected listenServers(): Promise<void>;
    protected logRoutes(layers: PlatformLayer[]): Promise<void>;
    protected mapTokenMiddlewares(): Promise<void>;
}
