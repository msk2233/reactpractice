"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UnderscoreEngine = void 0;
const tslib_1 = require("tslib");
const viewEngine_1 = require("../decorators/viewEngine");
const Engine_1 = require("./Engine");
let UnderscoreEngine = class UnderscoreEngine extends Engine_1.Engine {
    async render(template, options) {
        const tpl = await this.compile(template, options)(options);
        return tpl.replace(/\n$/, "");
    }
    $cacheOptions(template, options) {
        const partials = {};
        for (const partial in options.partials) {
            partials[partial] = this.engine.template(options.partials[partial]);
        }
        options.partials = partials;
        return options;
    }
    $compile(template, options) {
        return this.engine.template(template, null, options);
    }
};
UnderscoreEngine = tslib_1.__decorate([
    (0, viewEngine_1.ViewEngine)("underscore")
], UnderscoreEngine);
exports.UnderscoreEngine = UnderscoreEngine;
//# sourceMappingURL=UnderscoreEngine.js.map