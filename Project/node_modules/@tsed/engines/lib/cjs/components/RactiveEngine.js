"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RactiveEngine = void 0;
const tslib_1 = require("tslib");
const viewEngine_1 = require("../decorators/viewEngine");
const Engine_1 = require("./Engine");
let RactiveEngine = class RactiveEngine extends Engine_1.Engine {
    $compile(template, options) {
        const Engine = this.engine;
        const compile = this.engine.parse(template);
        Engine.DEBUG = false;
        return (options) => {
            options.template = compile;
            return new Engine(this.clean(options)).toHTML();
        };
    }
    clean(options) {
        if (options.data === null || options.data === undefined) {
            // Shallow clone the options object
            options.data = Object.assign({}, options);
            // Remove consolidate-specific properties from the clone
            let i;
            let length;
            let properties = ["template", "filename", "cache", "partials"];
            for (i = 0, length = properties.length; i < length; i++) {
                const property = properties[i];
                delete options.data[property];
            }
        }
        return options;
    }
};
RactiveEngine = tslib_1.__decorate([
    (0, viewEngine_1.ViewEngine)("ractive")
], RactiveEngine);
exports.RactiveEngine = RactiveEngine;
//# sourceMappingURL=RactiveEngine.js.map