!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["@tsed/di"]=t():e["@tsed/di"]=t()}(self,(()=>(()=>{var e={550:(e,t,r)=>{"use strict";r.r(t),r.d(t,{camelCase:()=>m,camelCaseTransform:()=>f,camelCaseTransformMerge:()=>d,capitalCase:()=>b,capitalCaseTransform:()=>O,constantCase:()=>E,dotCase:()=>T,headerCase:()=>w,noCase:()=>c,paramCase:()=>C,pascalCase:()=>l,pascalCaseTransform:()=>p,pascalCaseTransformMerge:()=>h,pathCase:()=>_,sentenceCase:()=>$,sentenceCaseTransform:()=>k,snakeCase:()=>D});var n=function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},s.apply(this,arguments)};function o(e){return e.toLowerCase()}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var i=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],a=/[^A-Z0-9]+/gi;function c(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=void 0===r?i:r,s=t.stripRegexp,c=void 0===s?a:s,p=t.transform,h=void 0===p?o:p,l=t.delimiter,f=void 0===l?" ":l,d=u(u(e,n,"$1\0$2"),c,"\0"),m=0,y=d.length;"\0"===d.charAt(m);)m++;for(;"\0"===d.charAt(y-1);)y--;return d.slice(m,y).split("\0").map(h).join(f)}function u(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce((function(e,t){return e.replace(t,r)}),e)}function p(e,t){var r=e.charAt(0),n=e.substr(1).toLowerCase();return t>0&&r>="0"&&r<="9"?"_"+r+n:""+r.toUpperCase()+n}function h(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function l(e,t){return void 0===t&&(t={}),c(e,s({delimiter:"",transform:p},t))}function f(e,t){return 0===t?e.toLowerCase():p(e,t)}function d(e,t){return 0===t?e.toLowerCase():h(e)}function m(e,t){return void 0===t&&(t={}),l(e,n({transform:f},t))}var y=function(){return y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},y.apply(this,arguments)};function g(e){return e.charAt(0).toUpperCase()+e.substr(1)}function O(e){return g(e.toLowerCase())}function b(e,t){return void 0===t&&(t={}),c(e,y({delimiter:" ",transform:O},t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var v=function(){return v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},v.apply(this,arguments)};function S(e){return e.toUpperCase()}function E(e,t){return void 0===t&&(t={}),c(e,v({delimiter:"_",transform:S},t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var R=function(){return R=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},R.apply(this,arguments)};function T(e,t){return void 0===t&&(t={}),c(e,R({delimiter:"."},t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var A=function(){return A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},A.apply(this,arguments)};function w(e,t){return void 0===t&&(t={}),b(e,A({delimiter:"-"},t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var P=function(){return P=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},P.apply(this,arguments)};function C(e,t){return void 0===t&&(t={}),T(e,P({delimiter:"-"},t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var M=function(){return M=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},M.apply(this,arguments)};function _(e,t){return void 0===t&&(t={}),T(e,M({delimiter:"/"},t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var x=function(){return x=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},x.apply(this,arguments)};function k(e,t){var r=e.toLowerCase();return 0===t?g(r):r}function $(e,t){return void 0===t&&(t={}),c(e,x({delimiter:" ",transform:k},t))}function D(e,t){return void 0===t&&(t={}),T(e,x({delimiter:"_"},t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError},886:e=>{var t;self,t=()=>(()=>{var e={340:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=340,e.exports=t},605:(e,t,r)=>{var n;!function(e){!function(t){var n="object"==typeof globalThis?globalThis:"object"==typeof r.g?r.g:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch(e){}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch(e){}}(),s=o(e);function o(e,t){return function(r,n){Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0!==n.Reflect&&(s=o(n.Reflect,s)),function(e,t){var r=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,s=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,a={__proto__:[]}instanceof Array,c=!i&&!a,u={create:i?function(){return G(Object.create(null))}:a?function(){return G({__proto__:null})}:function(){return G({})},has:c?function(e,t){return r.call(e,t)}:function(e,t){return t in e},get:c?function(e,t){return r.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},p=Object.getPrototypeOf(Function),h="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,s=r+1;s<n;s++)this._keys[s-1]=this._keys[s],this._values[s-1]=this._values[s];return this._keys.length--,this._values.length--,$(t,this._cacheKey)&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,s)},t.prototype.entries=function(){return new r(this._keys,this._values,i)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){if(!$(this._cacheKey,e)){this._cacheIndex=-1;for(var r=0;r<this._keys.length;r++)if($(this._keys[r],e)){this._cacheIndex=r;break}}return this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function s(e,t){return t}function i(e,t){return[e,t]}}(),l="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}(),f="function"==typeof WeakMap?WeakMap:function(){var e=u.create(),t=n();return function(){function e(){this._key=n()}return e.prototype.has=function(e){var t=s(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=s(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return s(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=s(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=n()},e}();function n(){var t;do{t="@@WeakMap@@"+i()}while(u.has(e,t));return e[t]=!0,t}function s(e,n){if(!r.call(e,t)){if(!n)return;Object.defineProperty(e,t,{value:u.create()})}return e[t]}function o(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function i(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var r="",n=0;n<16;++n){var s=t[n];4!==n&&6!==n&&8!==n||(r+="-"),s<16&&(r+="0"),r+=s.toString(16).toLowerCase()}return r}}(),d=n?Symbol.for("@reflect-metadata:registry"):void 0,m=function(){var e;return!A(d)&&P(t.Reflect)&&Object.isExtensible(t.Reflect)&&(e=t.Reflect[d]),A(e)&&(e=function(){var e,r,n,s;A(d)||void 0===t.Reflect||d in t.Reflect||"function"!=typeof t.Reflect.defineMetadata||(e=function(e){var t=e.defineMetadata,r=e.hasOwnMetadata,n=e.getOwnMetadata,s=e.getOwnMetadataKeys,o=e.deleteMetadata,i=new f;return{isProviderFor:function(e,t){var r=i.get(e);return A(r)?!!s(e,t).length&&(A(r)&&(r=new l,i.set(e,r)),r.add(t),!0):r.has(t)},OrdinaryDefineOwnMetadata:t,OrdinaryHasOwnMetadata:r,OrdinaryGetOwnMetadata:n,OrdinaryOwnMetadataKeys:s,OrdinaryDeleteMetadata:o}}(t.Reflect));var o=new f,i={registerProvider:function(t){if(!Object.isExtensible(i))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case e===t:break;case A(r):r=t;break;case r===t:break;case A(n):n=t;break;case n===t:break;default:void 0===s&&(s=new l),s.add(t)}},getProvider:c,setProvider:function(e,t,r){if(!u(r))throw new Error("Metadata provider not registered.");var n=c(e,t);if(n!==r){if(!A(n))return!1;var s=o.get(e);A(s)&&(s=new h,o.set(e,s)),s.set(t,r)}return!0}};return i;function a(t,o){if(!A(r)){if(r.isProviderFor(t,o))return r;if(!A(n)){if(n.isProviderFor(t,o))return r;if(!A(s))for(var i=N(s);;){var a=I(i);if(!a)return;var c=j(a);if(c.isProviderFor(t,o))return L(i),c}}}if(!A(e)&&e.isProviderFor(t,o))return e}function c(e,t){var r,n=o.get(e);return A(n)||(r=n.get(t)),A(r)?(A(r=a(e,t))||(A(n)&&(n=new h,o.set(e,n)),n.set(t,r)),r):r}function u(e){if(A(e))throw new TypeError;return r===e||n===e||!A(s)&&s.has(e)}}()),!A(d)&&P(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,d,{enumerable:!1,configurable:!1,writable:!1,value:e}),e}(),y=function(e){var t=new f,r={isProviderFor:function(e,r){var n=t.get(e);return!A(n)&&n.has(r)},OrdinaryDefineOwnMetadata:function(e,t,r,s){n(r,s,!0).set(e,t)},OrdinaryHasOwnMetadata:function(e,t,r){var s=n(t,r,!1);return!A(s)&&C(s.has(e))},OrdinaryGetOwnMetadata:function(e,t,r){var s=n(t,r,!1);if(!A(s))return s.get(e)},OrdinaryOwnMetadataKeys:function(e,t){var r=[],s=n(e,t,!1);if(A(s))return r;for(var o=N(s.keys()),i=0;;){var a=I(o);if(!a)return r.length=i,r;var c=j(a);try{r[i]=c}catch(e){try{L(o)}finally{throw e}}i++}},OrdinaryDeleteMetadata:function(e,r,s){var o=n(r,s,!1);if(A(o))return!1;if(!o.delete(e))return!1;if(0===o.size){var i=t.get(r);A(i)||(i.delete(s),0===i.size&&t.delete(i))}return!0}};return m.registerProvider(r),r;function n(n,s,o){var i=t.get(n),a=!1;if(A(i)){if(!o)return;i=new h,t.set(n,i),a=!0}var c=i.get(s);if(A(c)){if(!o)return;if(c=new h,i.set(s,c),!e.setProvider(n,s,r))throw i.delete(s),a&&t.delete(n),new Error("Wrong provider for target.")}return c}}(m);function g(e,t,r){if(O(e,t,r))return!0;var n=H(t);return!w(n)&&g(e,n,r)}function O(e,t,r){var n=U(t,r,!1);return!A(n)&&C(n.OrdinaryHasOwnMetadata(e,t,r))}function b(e,t,r){if(O(e,t,r))return v(e,t,r);var n=H(t);return w(n)?void 0:b(e,n,r)}function v(e,t,r){var n=U(t,r,!1);if(!A(n))return n.OrdinaryGetOwnMetadata(e,t,r)}function S(e,t,r,n){U(r,n,!0).OrdinaryDefineOwnMetadata(e,t,r,n)}function E(e,t){var r=R(e,t),n=H(e);if(null===n)return r;var s=E(n,t);if(s.length<=0)return r;if(r.length<=0)return s;for(var o=new l,i=[],a=0,c=r;a<c.length;a++){var u=c[a];o.has(u)||(o.add(u),i.push(u))}for(var p=0,h=s;p<h.length;p++)u=h[p],o.has(u)||(o.add(u),i.push(u));return i}function R(e,t){var r=U(e,t,!1);return r?r.OrdinaryOwnMetadataKeys(e,t):[]}function T(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function A(e){return void 0===e}function w(e){return null===e}function P(e){return"object"==typeof e?null!==e:"function"==typeof e}function C(e){return!!e}function M(e){var t=function(e,t){switch(T(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r="string",n=D(e,s);if(void 0!==n){var o=n.call(e,r);if(P(o))throw new TypeError;return o}return function(e,t){var r,n,s=e.toString;if(x(s)&&!P(n=s.call(e)))return n;if(x(r=e.valueOf)&&!P(n=r.call(e)))return n;throw new TypeError}(e)}(e);return"symbol"==typeof t?t:function(e){return""+e}(t)}function _(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"function"==typeof e}function k(e){return"function"==typeof e}function $(e,t){return e===t||e!=e&&t!=t}function D(e,t){var r=e[t];if(null!=r){if(!x(r))throw new TypeError;return r}}function N(e){var t=D(e,o);if(!x(t))throw new TypeError;var r=t.call(e);if(!P(r))throw new TypeError;return r}function j(e){return e.value}function I(e){var t=e.next();return!t.done&&t}function L(e){var t=e.return;t&&t.call(e)}function H(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===p)return t;if(t!==p)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var s=n.constructor;return"function"!=typeof s||s===e?t:s}function U(e,t,r){var n=m.getProvider(e,t);if(!A(n))return n;if(r){if(m.setProvider(e,t,y))return y;throw new Error("Illegal state.")}}function G(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,r,n){if(A(r)){if(!_(e))throw new TypeError;if(!k(t))throw new TypeError;return function(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!A(n)&&!w(n)){if(!k(n))throw new TypeError;t=n}}return t}(e,t)}if(!_(e))throw new TypeError;if(!P(t))throw new TypeError;if(!P(n)&&!A(n)&&!w(n))throw new TypeError;return w(n)&&(n=void 0),function(e,t,r,n){for(var s=e.length-1;s>=0;--s){var o=(0,e[s])(t,r,n);if(!A(o)&&!w(o)){if(!P(o))throw new TypeError;n=o}}return n}(e,t,r=M(r),n)})),e("metadata",(function(e,t){return function(r,n){if(!P(r))throw new TypeError;if(!A(n)&&!function(e){switch(T(e)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;S(e,t,r,n)}})),e("defineMetadata",(function(e,t,r,n){if(!P(r))throw new TypeError;return A(n)||(n=M(n)),S(e,t,r,n)})),e("hasMetadata",(function(e,t,r){if(!P(t))throw new TypeError;return A(r)||(r=M(r)),g(e,t,r)})),e("hasOwnMetadata",(function(e,t,r){if(!P(t))throw new TypeError;return A(r)||(r=M(r)),O(e,t,r)})),e("getMetadata",(function(e,t,r){if(!P(t))throw new TypeError;return A(r)||(r=M(r)),b(e,t,r)})),e("getOwnMetadata",(function(e,t,r){if(!P(t))throw new TypeError;return A(r)||(r=M(r)),v(e,t,r)})),e("getMetadataKeys",(function(e,t){if(!P(e))throw new TypeError;return A(t)||(t=M(t)),E(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!P(e))throw new TypeError;return A(t)||(t=M(t)),R(e,t)})),e("deleteMetadata",(function(e,t,r){if(!P(t))throw new TypeError;if(A(r)||(r=M(r)),!P(t))throw new TypeError;A(r)||(r=M(r));var n=U(t,r,!1);return!A(n)&&n.OrdinaryDeleteMetadata(e,t,r)}))}(s,n),void 0===n.Reflect&&(n.Reflect=e)}()}(n||(n={}))}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";function e(e,t){return Object.getOwnPropertyDescriptor(e&&e.prototype||e,t)}function t(t,r){return e(t,r)?.value}function s(t=!0){return(r,n)=>{const s=e(r,n)||{writable:!0,enumerable:!0};return s.configurable=t,Object.defineProperty(r&&r.prototype||r,n,s),s}}function o(e,t){if("undefined"!=typeof process&&!0===process.noDeprecation)return e;if("undefined"==typeof process)return function(...r){return o(e,t).apply(this,r)};let r=!1;return function(...n){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,n)}}function i(e){return(t,r,n)=>{const s=n.value;return n.value=o(s,e),n}}function a(t=!0){return(r,n)=>{const s=e(r,n)||{writable:!0,configurable:!0};return s.enumerable=t,Object.defineProperty(r&&r.prototype||r,n,s),s}}function c(){return s(!1)}function u(){return a(!1)}function p(t=!0){return(r,n)=>{const s=e(r,n)||{configurable:!0,enumerable:!0};return s.writable=t,Object.defineProperty(r&&r.prototype||r,n,s),s}}function h(){return p(!1)}var l;function f(e){return e.prototype?e:e.constructor}function d(e){return f(e)}function m(e){const[t,r,n]=e,s=e=>t!==d(t)?e:`${e}.static`;return"number"==typeof n?r?s("parameter"):"parameter.constructor":n&&n.value?s("method"):r&&void 0===n||n?s("property"):l.CLASS}function y(e){return e===Date||e instanceof Date&&!isNaN(+e)}function g(e){return"function"==typeof e}function O(e){return null==e}function b(e){return"boolean"==typeof e||e instanceof Boolean||e===Boolean}function v(e){return"boolean"==typeof e||e instanceof Boolean||e===Boolean}function S(e){return"number"==typeof e}function E(e){return"number"==typeof e||e instanceof Number||e===Number}function R(e){return"string"==typeof e}function T(e){return"string"==typeof e||e instanceof String||e===String}function A(e){return T(e)||E(e)||v(e)}function w(e){return R(e)||S(e)||b(e)}function P(e){return[String,Number,Boolean].includes(e)}function C(e){return"symbol"==typeof e}function M(e){return"symbol"==typeof e||e instanceof Symbol||e===Symbol}function _(e){return e instanceof RegExp}r.r(n),r.d(n,{AnyToPromise:()=>pe,AnyToPromiseResponseTypes:()=>ce,AnyToPromiseStatus:()=>ae,CLASS_STORE:()=>V,Configurable:()=>s,DecoratorTypes:()=>l,Deprecated:()=>i,Enumerable:()=>a,Env:()=>ue,EnvTypes:()=>he,Hooks:()=>le,METHOD_STORE:()=>J,Metadata:()=>K,NotConfigurable:()=>c,NotEnumerable:()=>u,PARAM_STORE:()=>z,PROPERTY_STORE:()=>W,Readonly:()=>h,Store:()=>Y,StoreFn:()=>Z,StoreMerge:()=>ee,StoreSet:()=>te,Type:()=>fe,UnsupportedDecoratorType:()=>de,Writable:()=>p,ancestorOf:()=>Se,ancestorsOf:()=>Re,catchAsyncError:()=>ye,catchError:()=>me,classOf:()=>d,cleanObject:()=>De,constructorOf:()=>je,createInstance:()=>k,decorateMethodsOf:()=>we,decoratorArgs:()=>Pe,decoratorTypeOf:()=>m,deepClone:()=>x,deepMerge:()=>I,descriptorOf:()=>e,getClass:()=>f,getClassOrSymbol:()=>Ke,getConstructor:()=>Ne,getConstructorArgNames:()=>Je,getEnumerableKeys:()=>ze,getHostInfoFromPort:()=>ke,getInheritedClass:()=>Ee,getRandomId:()=>ge,getValue:()=>Xe,hasJsonMethod:()=>Qe,importPackage:()=>$e,inheritedDescriptorOf:()=>Ce,isArray:()=>Ie,isArrayOrArrayClass:()=>Le,isArrowFn:()=>He,isBoolean:()=>b,isBooleanOrBooleanClass:()=>v,isBuffer:()=>Ue,isClass:()=>Fe,isClassObject:()=>Be,isCollection:()=>Ye,isDate:()=>y,isEmpty:()=>Ze,isEnumerable:()=>We,isFunction:()=>g,isInheritedFrom:()=>et,isMethodDescriptor:()=>t,isMomentObject:()=>tt,isMongooseObject:()=>nt,isNil:()=>O,isNumber:()=>S,isNumberOrNumberClass:()=>E,isObject:()=>re,isObjectID:()=>rt,isObservable:()=>ne,isPlainObject:()=>qe,isPrimitive:()=>w,isPrimitiveClass:()=>P,isPrimitiveOrPrimitiveClass:()=>A,isPromise:()=>se,isProtectedKey:()=>$,isRegExp:()=>_,isSerializable:()=>st,isStream:()=>oe,isString:()=>R,isStringOrStringClass:()=>T,isSymbol:()=>C,isSymbolOrSymbolClass:()=>M,isUint8Array:()=>Ge,mergeReducerBuilder:()=>N,methodsOf:()=>Ae,nameOf:()=>U,nameOfClass:()=>L,nameOfSymbol:()=>H,objectKeys:()=>D,primitiveOf:()=>ot,prototypeOf:()=>Te,proxyDelegation:()=>ve,setValue:()=>it,toMap:()=>ct,toStringConstructor:()=>Ve,uniq:()=>Oe,uniqBy:()=>be,useDecorators:()=>Me,useMethodDecorator:()=>_e,useMethodDecorators:()=>xe}),function(e){e.PARAM="parameter",e.PARAM_CTOR="parameter.constructor",e.PARAM_STC="parameter.static",e.PROP="property",e.PROP_STC="property.static",e.METHOD="method",e.METHOD_STC="method.static",e.CLASS="class"}(l||(l={}));const x=(e,t=new WeakMap)=>{if((e=>O(e)||w(e)||C(e)||g(e))(e))return e;const r=t.get(e);if(r)return r;if(ArrayBuffer.isView(e))return Buffer.isBuffer(e)?Buffer.from(e):new(d(e))(e.buffer.slice(0),e.byteOffset,e.byteLength);if(y(e))return new Date(e);if(_(e))return new RegExp(e);if(Array.isArray(e)){const r=[];return t.set(e,r),e.forEach(((e,n)=>r[n]=x(e,t))),r}if(e instanceof Map){const r=new Map;return t.set(e,r),e.forEach(((e,n)=>r.set(x(n,t),x(e,t)))),r}if(e instanceof Set){const r=new Set;return t.set(e,r),e.forEach((e=>r.add(x(e,t)))),r}const n=Object.create(Reflect.getPrototypeOf(e));return t.set(e,n),Reflect.ownKeys(e).forEach((r=>{const s=Object.getOwnPropertyDescriptor(e,r);s&&(g(s.value)?Object.defineProperty(n,r,s):Object.defineProperty(n,r,{...s,value:x(s.value,t)}))})),n};function k(e){return e&&d(e)!==Object?Object.create(e):{}}function $(e){return["__proto__","constructor","prototype"].includes(e)}function D(e){return Object.keys(e).filter((e=>!$(e)))}function N(e){return(t,r,n)=>{const s=t.findIndex((t=>e(t,r)));return-1===s?[...t,r]:(t[s]=I(t[s],r,n),t)}}const j=N(((e,t)=>e===t));function I(e,t,r={}){if(function(e,t){return null==e||""===e&&""!==t}(t,e))return e;if(function(e,t){return w(e)||C(e)||g(e)||void 0===t}(t,e))return t;if(Array.isArray(e)){const n=function({reducers:e,parentKey:t}){return e?t&&e[t]?e[t]:e.default||j:j}(r);return[].concat(t).reduce(((e,t)=>n(e,t,r)),[...e])}return[...D(e),...D(t)].reduce(((n,s)=>{const o=I(e&&e[s],t&&t[s],{...r,parentKey:s});return r.cleanUndefinedProps&&void 0===o?n:{...n,[s]:o}}),k(e))}function L(e){return"function"==typeof e?e.name:e.constructor.name}const H=e=>e.toString().replace("Symbol(","").replace(")","");function U(e){switch(typeof e){default:return""+e;case"symbol":return H(e);case"function":return L(e)}}r(605);const G="design:paramtypes",B="design:type",q="design:returntype",F=new Map;class K{static get(e,t,r){return Reflect.getMetadata(e,d(t),r)}static getOwn(e,t,r){return Reflect.getOwnMetadata(e,d(t),r)}static getType(e,t){return Reflect.getMetadata(B,e,t)}static getOwnType(e,t){return Reflect.getMetadata(B,e,t)}static getReturnType(e,t){return Reflect.getMetadata(q,e,t)}static getOwnReturnType(e,t){return Reflect.getOwnMetadata(q,e,t)}static has(e,t,r){try{return Reflect.hasMetadata(e,d(t),r)}catch(e){}return!1}static hasOwn(e,t,r){return Reflect.hasOwnMetadata(e,d(t),r)}static delete(e,t,r){return Reflect.deleteMetadata(e,d(t),r)}static setParamTypes(e,t,r){return this.set(G,r,e.prototype,t)}static getTargetsFromPropertyKey=e=>F.has(e)&&F.get(e)||[];static set(e,t,r,n){const s=F.has(e)&&F.get(e)||[],o=d(r);-1===s.indexOf(o)&&(s.push(o),F.set(e,s)),Reflect.defineMetadata(e,t,d(r),n)}static getParamTypes(e,t){return Reflect.getMetadata(G,e,t)||[]}static getOwnParamTypes(e,t){return Reflect.getOwnMetadata(G,e,t)||[]}}const V="tsed:class:store",J="tsed:method:store",W="tsed:property:store",z="tsed:param:store",X=new Map;function Q(e,...t){if(C(t[0]))return X.has(t[0])||X.set(t[0],new Y),X.get(t[0]);{const r=K;return r.hasOwn(e,...t)||r.set(e,new Y,...t),r.getOwn(e,...t)}}class Y{_entries=new Map;static from(...e){return function(e){const[t,r,n]=e;switch(m(e)){case l.PARAM_CTOR:case l.PARAM_STC:case l.PARAM:const e=Q(z,t,r);return e.has(""+n)||e.set(""+n,new Y),e.get(""+n);case l.PROP:case l.PROP_STC:return Q(W,t,r);case l.METHOD:case l.METHOD_STC:return Q(J,t,r);case l.CLASS:return Q(V,t)}}(e)}static fromMethod(t,r){return Y.from(t,r,e(t,r))}static mergeStoreFrom(e,t,...r){const n=Y.from(e,...r);return Y.from(t,...r)._entries.forEach(((e,t)=>{n.merge(t,e)})),n}static mergeStoreMethodFrom(t,r,n){return this.mergeStoreFrom(t,r,n,e(t,n))}get(e,t){return this._entries.get(U(e))||t}has(e){return this._entries.has(U(e))}set(e,t){return this._entries.set(U(e),t),this}delete(e){return this._entries.delete(U(e))}merge(e,t,r=!1){let n=this.get(e);return n&&(t=x(t),n=x(n),t=r?I(t,n):I(n,t)),this.set(e,t),this}toJson(){return[...this._entries.entries()].reduce(((e,[t,r])=>({...e,[t]:r})),{})}}function Z(e){return(...t)=>{const r=Y.from(...t),n=e(r,t);return"function"==typeof n&&n(...t),t[2]}}function ee(e,t){return Z((r=>{r.merge(e,t)}))}function te(e,t){return Z((r=>{r.set(e,t)}))}function re(e){return"object"==typeof e}function ne(e){return!!e&&"function"==typeof e.lift&&"function"==typeof e.subscribe}function se(e){return e===Promise||e instanceof Promise||!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}function oe(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe}function ie(e){return re(e)&&"data"in e&&"headers"in e&&"status"in e&&"statusText"in e}var ae,ce,ue;!function(e){e.PENDING="PENDING",e.CANCELED="CANCELED",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(ae||(ae={})),function(e){e.STREAM="STREAM",e.BUFFER="BUFFER",e.DATA="DATA"}(ce||(ce={}));class pe{status=ae.PENDING;args;#e;#t;#r=!1;#n;constructor({hasNextFunction:e=!1}={}){this.#r=e,this.#n=new Promise(((e,t)=>{this.#e=e,this.#t=t}))}isDone(){return this.status!==ae.PENDING}get next(){return this.#r=!0,e=>{if(!this.isDone())return e?this.reject(e):this.resolve({type:ce.DATA})}}call(e){if(this.isDone())return Promise.resolve(this);try{this.handle(e())}catch(e){this.reject(e)}return this.#n}reject(e){this.isDone()||(this.done(ae.REJECTED),this.#t(e))}resolve(e={}){this.isDone()||(this.done(ae.RESOLVED),this.#e({...e,state:ae.RESOLVED}))}destroy(){}cancel(){if(!this.isDone())return this.done(ae.CANCELED),this.#e({state:ae.CANCELED})}done(e){this.destroy(),this.status=e}handle(e,t={}){if(!this.isDone()){if(e){if(this.isCanceledResponse(e))return this.cancel();if(ne(e)&&(e=e.toPromise()),ie(e))return this.handle(e.data,{...t,status:e.status,headers:e.headers});if(oe(e))return this.resolve({...t,type:ce.STREAM,data:e});if(oe(e)||Buffer.isBuffer(e))return this.resolve({...t,type:ce.BUFFER,data:e});if(se(e))return e.then((e=>this.handle(e,t))).catch((e=>e.response&&ie(e.response)?this.handle(e.response):this.reject(e)))}return this.#r?void 0:this.resolve({...t,data:e,type:ce.DATA})}}isCanceledResponse(e){return e===ae.CANCELED}}!function(e){e.PROD="production",e.DEV="development",e.TEST="test"}(ue||(ue={}));const he=ue;class le{#s={};has(e){return!!this.#s[e]}on(e,t){return this.#s[e]||(this.#s[e]=[]),this.#s[e].push(t),this}off(e,t){return this.#s[e]&&(this.#s[e]=this.#s[e].filter((e=>e===t))),this}emit(e,t=[],r=null){const n=this.#s[e];if(n?.length)for(const e of n)e.call(r,...t)}alter(e,t,r=[],n=null){const s=this.#s[e];if(s?.length)for(const e of s)t=e.call(n,t,...r);return t}async asyncEmit(e,t=[],r=null){const n=this.#s[e];if(n?.length){const e=n.map((e=>e.call(r,...t)));await Promise.all(e)}}async asyncAlter(e,t,r=[],n=null){const s=this.#s[e];if(s?.length)for(const e of s)t=await e.call(n,t,...r);return t}destroy(){this.#s={}}}const fe=Function;r.g.Type=fe;class de extends Error{name;constructor(e,t){super(de.buildMessage(e,t))}static buildMessage(e,t){const[r,n,s]=t,o=m(t),i=o.split("/")[0],a="parameter"===i?".["+s+"]":"",c=n?"."+n:"parameter"===i?".constructor":"",u=U(d(r))+c+a;return`${e.name} cannot be used as ${o} decorator on ${u}`}}function me(e){try{e()}catch(e){return e}}async function ye(e){try{await e()}catch(e){return e}}function ge(){return`e${Math.random().toString(36).substring(7)}`}function Oe(e){return Array.from(new Set(e).values())}function be(e,t="id"){const r=new Map;return e.forEach((e=>{r.set(e[t],e)})),Array.from(r.values())}function ve(e,t={}){const{handlers:r={},remove:n,ownKeys:s}=t,o=t.getter||((e,t)=>e.get(t)),i=t.setter||((e,t,r)=>!!e.set(t,r)),a=(e,t)=>Reflect.has(e,t)||"symbol"==typeof t;return new Proxy(e,{getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e,t),has:(e,t)=>a(e,t)?Reflect.has(e,t):void 0!==o(e,t),get:(e,t,r)=>a(e,t)?Reflect.get(e,t,r):o(e,t),set:(e,t,r,n)=>a(e,t)?Reflect.set(e,t,r,n):!!i(e,t,r,n),deleteProperty:(e,t)=>a(e,t)||!n?Reflect.deleteProperty(e,t):n(e,t),defineProperty:(e,t,r)=>Reflect.defineProperty(e,t,r),ownKeys:e=>Oe(Reflect.ownKeys(e).concat(s&&s(e)||[])),...r})}function Se(e){return e&&Object.getPrototypeOf(e)}function Ee(e){return Se(e)}function Re(e){const t=[];let r=d(e);for(;r&&""!==U(r);)t.unshift(r),r=Ee(r);return t}function Te(e){return d(e)===e?e.prototype:e}function Ae(e){const t=new Map;return Re(e=d(e)).forEach((e=>{Reflect.ownKeys(Te(e)).forEach((r=>{"constructor"!==r&&t.set(r,{target:e,propertyKey:r})}))})),Array.from(t.values())}function we(t,r){Ae(t).forEach((({target:n,propertyKey:s})=>{const o=Te(t);n!==d(t)&&(Object.defineProperty(o,s,{writable:!0,configurable:!0,value(...e){return Te(n)[s].apply(this,e)}}),Y.mergeStoreMethodFrom(t,n,s));const i=r(o,s,e(t,s));i&&Object.defineProperty(o,s,i)}))}function Pe(t,r){return[t,r,e(t,r)]}function Ce(e,t){for(const r of Re(e)){const e=Object.getOwnPropertyDescriptor(r&&r.prototype||r,t);if(e)return e}}function Me(...e){return(...t)=>{e.filter((e=>!!e)).forEach((e=>{e(...t)}))}}function _e(t){return(r,n)=>t(r,n,e(r,n))}function xe(...t){return(r,n)=>{t.filter(Boolean).forEach((t=>t(r,n,e(r,n))))}}function ke(e,t){let r="0.0.0.0",n=t;return"string"==typeof t&&t.indexOf(":")>-1&&([r,n]=t.split(":"),n=+n),{protocol:e,address:r,port:n,toString(){return[`${this.protocol}://${this.address}`,"number"==typeof this.port&&this.port].filter(Boolean).join(":")}}}async function $e(e,t=(()=>r(340)(e)),n=!1){try{return await t()}catch(e){if(!n)throw e;return{}}}function De(e,t=[]){return Object.entries(e).reduce(((e,[r,n])=>$(r)||t.includes(r)||void 0===n?e:{...e,[r]:n}),{})}function Ne(e){return"function"==typeof e?e:e.constructor}function je(e){return Ne(e)}function Ie(e){return Array.isArray(e)}function Le(e){return e===Array||Ie(e)}function He(e){return e&&g(e)&&!e.prototype}function Ue(e){return!(!e||!("isBuffer"in e)||"function"!=typeof e.isBuffer)||Ge(e)}function Ge(e){return!(!e||!(e===Uint8Array||e instanceof Uint8Array))}function Be(e){return e===Object}function qe(e){return Be(d(e))&&e!==Object}function Fe(e){return!!e&&!He(e)&&!(C(e)||A(e)||Be(e)||y(e)||se(e)||Le(e)||Ue(e))}function Ke(e){return Fe(e)?d(e):e}function Ve(e){return`${(je(e).toString().split("\n").find((e=>e.indexOf("constructor(")>-1))||"constructor()").replace("{","").trim()}`}function Je(e){return Ve(e).split("constructor(")[1].split(")")[0].split(", ").filter(Boolean).map((e=>e.trim()))}function We(e,t){const r=d(e);if(r){const e=Ce(r,t);if(e)return e.enumerable}return Object.prototype.propertyIsEnumerable.call(e,t)}function ze(e){const t=[];for(const r in e)!$(r)&&We(e,r)&&t.push(r);return t}function Xe(...e){const t=(e=>{const[t,r,n,s="."]=e;return re(r)||R(t)?{expression:t,scope:r,defaultValue:n,separator:s}:{expression:r,scope:t,defaultValue:n,separator:s}})(e);let r=t.scope;const{expression:n,defaultValue:s,separator:o}=t;if(!n)return r;if(!r)return s;const i=n.split(o),a=e=>{if(r){if(void 0!==r[e]||re(r)&&e in r)return r[e];if(g(r.get))return r.get(e)}};for(;(r=a(i.shift()))&&i.length;);return void 0===r?s:r}function Qe(e){return e&&"function"==typeof e.toJSON}function Ye(e){return Le(e)||e===Map||e instanceof Map||e===Set||e instanceof Set||e===WeakMap||e instanceof WeakMap||e===WeakSet||e instanceof WeakSet}function Ze(e){return""===e||O(e)}function et(e,t,r=5){if(!e||!t)return!1;for(e=d(e),t=d(t);""!==U(e);){if(!r)return!1;if(e===t)return!0;e=Se(e),r--}return!1}function tt(e){return!(!e||!e?._isAMomentObject)}function rt(e){return e&&e._bsontype}function nt(e){return!!(Qe(e)&&e.$isMongooseModelPrototype||rt(e))}function st(e){return!(Buffer.isBuffer(e)||oe(e)||b(e)||S(e)||R(e)||O(e))}function ot(e){return T(e)?"string":E(e)?"number":v(e)?"boolean":"any"}function it(e,t,r,n="."){const s=t.split(n);for(;o=s.shift(),i=!s.length,!$(o)&&(i?("function"==typeof e.set?e.set(o,r):e[o]=r,0):("function"==typeof e.set?(e.has(o)||e.set(o,{}),e=e.get(o)):e=e[o]=e[o]||{},1)););var o,i}function at(e){return e?R(e)?t=>t[e]:e:(e,t)=>String(t)}function ct(e,t){if(Ie(e)){const r=at(t||"id");return e.reduce(((e,t,n)=>([].concat(r(t,n)).forEach((r=>{const n=e.get(r);t=n?.merge?.(t)||t,e.set(r,t)})),e)),new Map)}const r=at(t);return Object.entries(e).reduce(((e,[t,n])=>e.set(r(n,t),n)),new Map)}})(),n})(),e.exports=t()},917:(e,t,r)=>{var n;self,n=(e,t)=>(()=>{"use strict";var r={133:(e,t,r)=>{e.exports=r(555)},379:e=>{const t="\\\\/",r=`[^${t}]`,n="\\.",s="\\/",o="[^/]",i=`(?:${s}|$)`,a=`(?:^|${s})`,c=`${n}{1,2}${i}`,u={DOT_LITERAL:n,PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:s,ONE_CHAR:"(?=.)",QMARK:o,END_ANCHOR:i,DOTS_SLASH:c,NO_DOT:`(?!${n})`,NO_DOTS:`(?!${a}${c})`,NO_DOT_SLASH:`(?!${n}{0,1}${i})`,NO_DOTS_SLASH:`(?!${c})`,QMARK_NO_DOT:`[^.${s}]`,STAR:`${o}*?`,START_ANCHOR:a,SEP:"/"},p={...u,SLASH_LITERAL:`[${t}]`,QMARK:r,STAR:`${r}*?`,DOTS_SLASH:`${n}{1,2}(?:[${t}]|$)`,NO_DOT:`(?!${n})`,NO_DOTS:`(?!(?:^|[${t}])${n}{1,2}(?:[${t}]|$))`,NO_DOT_SLASH:`(?!${n}{0,1}(?:[${t}]|$))`,NO_DOTS_SLASH:`(?!${n}{1,2}(?:[${t}]|$))`,QMARK_NO_DOT:`[^.${t}]`,START_ANCHOR:`(?:^|[${t}])`,END_ANCHOR:`(?:[${t}]|$)`,SEP:"\\"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?p:u}},390:(e,t,r)=>{const n=r(379),s=r(290),{MAX_LENGTH:o,POSIX_REGEX_SOURCE:i,REGEX_NON_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_BACKREF:c,REPLACEMENTS:u}=n,p=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const r=`[${e.join("-")}]`;try{new RegExp(r)}catch(t){return e.map((e=>s.escapeRegex(e))).join("..")}return r},h=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,l=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=u[e]||e;const r={...t},l="number"==typeof r.maxLength?Math.min(o,r.maxLength):o;let f=e.length;if(f>l)throw new SyntaxError(`Input length: ${f}, exceeds maximum allowed length: ${l}`);const d={type:"bos",value:"",output:r.prepend||""},m=[d],y=r.capture?"":"?:",g=n.globChars(r.windows),O=n.extglobChars(g),{DOT_LITERAL:b,PLUS_LITERAL:v,SLASH_LITERAL:S,ONE_CHAR:E,DOTS_SLASH:R,NO_DOT:T,NO_DOT_SLASH:A,NO_DOTS_SLASH:w,QMARK:P,QMARK_NO_DOT:C,STAR:M,START_ANCHOR:_}=g,x=e=>`(${y}(?:(?!${_}${e.dot?R:b}).)*?)`,k=r.dot?"":T,$=r.dot?P:C;let D=!0===r.bash?x(r):M;r.capture&&(D=`(${D})`),"boolean"==typeof r.noext&&(r.noextglob=r.noext);const N={input:e,index:-1,start:0,dot:!0===r.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:m};e=s.removePrefix(e,N),f=e.length;const j=[],I=[],L=[];let H,U=d;const G=()=>N.index===f-1,B=N.peek=(t=1)=>e[N.index+t],q=N.advance=()=>e[++N.index],F=()=>e.slice(N.index+1),K=(e="",t=0)=>{N.consumed+=e,N.index+=t},V=e=>{N.output+=null!=e.output?e.output:e.value,K(e.value)},J=()=>{let e=1;for(;"!"===B()&&("("!==B(2)||"?"===B(3));)q(),N.start++,e++;return e%2!=0&&(N.negated=!0,N.start++,!0)},W=e=>{N[e]++,L.push(e)},z=e=>{N[e]--,L.pop()},X=e=>{if("globstar"===U.type){const t=N.braces>0&&("comma"===e.type||"brace"===e.type),r=!0===e.extglob||j.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||r||(N.output=N.output.slice(0,-U.output.length),U.type="star",U.value="*",U.output=D,N.output+=U.output)}if(j.length&&"paren"!==e.type&&!O[e.value]&&(j[j.length-1].inner+=e.value),(e.value||e.output)&&V(e),U&&"text"===U.type&&"text"===e.type)return U.value+=e.value,void(U.output=(U.output||"")+e.value);e.prev=U,m.push(e),U=e},Q=(e,t)=>{const n={...O[t],conditions:1,inner:""};n.prev=U,n.parens=N.parens,n.output=N.output;const s=(r.capture?"(":"")+n.open;W("parens"),X({type:e,value:t,output:N.output?"":E}),X({type:"paren",extglob:!0,value:q(),output:s}),j.push(n)},Y=e=>{let t=e.close+(r.capture?")":"");if("negate"===e.type){let n=D;e.inner&&e.inner.length>1&&e.inner.includes("/")&&(n=x(r)),(n!==D||G()||/^\)+$/.test(F()))&&(t=e.close=`)$))${n}`),"bos"===e.prev.type&&G()&&(N.negatedExtglob=!0)}X({type:"paren",extglob:!0,value:H,output:t}),z("parens")};if(!1!==r.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let n=!1,o=e.replace(c,((e,t,r,s,o,i)=>"\\"===s?(n=!0,e):"?"===s?t?t+s+(o?P.repeat(o.length):""):0===i?$+(o?P.repeat(o.length):""):P.repeat(r.length):"."===s?b.repeat(r.length):"*"===s?t?t+s+(o?D:""):D:t?e:`\\${e}`));return!0===n&&(o=!0===r.unescape?o.replace(/\\/g,""):o.replace(/\\+/g,(e=>e.length%2==0?"\\\\":e?"\\":""))),o===e&&!0===r.contains?(N.output=e,N):(N.output=s.wrapOutput(o,N,t),N)}for(;!G();){if(H=q(),"\0"===H)continue;if("\\"===H){const e=B();if("/"===e&&!0!==r.bash)continue;if("."===e||";"===e)continue;if(!e){H+="\\",X({type:"text",value:H});continue}const t=/^\\+/.exec(F());let n=0;if(t&&t[0].length>2&&(n=t[0].length,N.index+=n,n%2!=0&&(H+="\\")),!0===r.unescape?H=q()||"":H+=q()||"",0===N.brackets){X({type:"text",value:H});continue}}if(N.brackets>0&&("]"!==H||"["===U.value||"[^"===U.value)){if(!1!==r.posix&&":"===H){const e=U.value.slice(1);if(e.includes("[")&&(U.posix=!0,e.includes(":"))){const e=U.value.lastIndexOf("["),t=U.value.slice(0,e),r=U.value.slice(e+2),n=i[r];if(n){U.value=t+n,N.backtrack=!0,q(),d.output||1!==m.indexOf(U)||(d.output=E);continue}}}("["===H&&":"!==B()||"-"===H&&"]"===B())&&(H=`\\${H}`),"]"!==H||"["!==U.value&&"[^"!==U.value||(H=`\\${H}`),!0===r.posix&&"!"===H&&"["===U.value&&(H="^"),U.value+=H,V({value:H});continue}if(1===N.quotes&&'"'!==H){H=s.escapeRegex(H),U.value+=H,V({value:H});continue}if('"'===H){N.quotes=1===N.quotes?0:1,!0===r.keepQuotes&&X({type:"text",value:H});continue}if("("===H){W("parens"),X({type:"paren",value:H});continue}if(")"===H){if(0===N.parens&&!0===r.strictBrackets)throw new SyntaxError(h("opening","("));const e=j[j.length-1];if(e&&N.parens===e.parens+1){Y(j.pop());continue}X({type:"paren",value:H,output:N.parens?")":"\\)"}),z("parens");continue}if("["===H){if(!0!==r.nobracket&&F().includes("]"))W("brackets");else{if(!0!==r.nobracket&&!0===r.strictBrackets)throw new SyntaxError(h("closing","]"));H=`\\${H}`}X({type:"bracket",value:H});continue}if("]"===H){if(!0===r.nobracket||U&&"bracket"===U.type&&1===U.value.length){X({type:"text",value:H,output:`\\${H}`});continue}if(0===N.brackets){if(!0===r.strictBrackets)throw new SyntaxError(h("opening","["));X({type:"text",value:H,output:`\\${H}`});continue}z("brackets");const e=U.value.slice(1);if(!0===U.posix||"^"!==e[0]||e.includes("/")||(H=`/${H}`),U.value+=H,V({value:H}),!1===r.literalBrackets||s.hasRegexChars(e))continue;const t=s.escapeRegex(U.value);if(N.output=N.output.slice(0,-U.value.length),!0===r.literalBrackets){N.output+=t,U.value=t;continue}U.value=`(${y}${t}|${U.value})`,N.output+=U.value;continue}if("{"===H&&!0!==r.nobrace){W("braces");const e={type:"brace",value:H,output:"(",outputIndex:N.output.length,tokensIndex:N.tokens.length};I.push(e),X(e);continue}if("}"===H){const e=I[I.length-1];if(!0===r.nobrace||!e){X({type:"text",value:H,output:H});continue}let t=")";if(!0===e.dots){const e=m.slice(),n=[];for(let t=e.length-1;t>=0&&(m.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&n.unshift(e[t].value);t=p(n,r),N.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const r=N.output.slice(0,e.outputIndex),n=N.tokens.slice(e.tokensIndex);e.value=e.output="\\{",H=t="\\}",N.output=r;for(const e of n)N.output+=e.output||e.value}X({type:"brace",value:H,output:t}),z("braces"),I.pop();continue}if("|"===H){j.length>0&&j[j.length-1].conditions++,X({type:"text",value:H});continue}if(","===H){let e=H;const t=I[I.length-1];t&&"braces"===L[L.length-1]&&(t.comma=!0,e="|"),X({type:"comma",value:H,output:e});continue}if("/"===H){if("dot"===U.type&&N.index===N.start+1){N.start=N.index+1,N.consumed="",N.output="",m.pop(),U=d;continue}X({type:"slash",value:H,output:S});continue}if("."===H){if(N.braces>0&&"dot"===U.type){"."===U.value&&(U.output=b);const e=I[I.length-1];U.type="dots",U.output+=H,U.value+=H,e.dots=!0;continue}if(N.braces+N.parens===0&&"bos"!==U.type&&"slash"!==U.type){X({type:"text",value:H,output:b});continue}X({type:"dot",value:H,output:b});continue}if("?"===H){if((!U||"("!==U.value)&&!0!==r.noextglob&&"("===B()&&"?"!==B(2)){Q("qmark",H);continue}if(U&&"paren"===U.type){const e=B();let t=H;if("<"===e&&!s.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===U.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(F()))&&(t=`\\${H}`),X({type:"text",value:H,output:t});continue}if(!0!==r.dot&&("slash"===U.type||"bos"===U.type)){X({type:"qmark",value:H,output:C});continue}X({type:"qmark",value:H,output:P});continue}if("!"===H){if(!0!==r.noextglob&&"("===B()&&("?"!==B(2)||!/[!=<:]/.test(B(3)))){Q("negate",H);continue}if(!0!==r.nonegate&&0===N.index){J();continue}}if("+"===H){if(!0!==r.noextglob&&"("===B()&&"?"!==B(2)){Q("plus",H);continue}if(U&&"("===U.value||!1===r.regex){X({type:"plus",value:H,output:v});continue}if(U&&("bracket"===U.type||"paren"===U.type||"brace"===U.type)||N.parens>0){X({type:"plus",value:H});continue}X({type:"plus",value:v});continue}if("@"===H){if(!0!==r.noextglob&&"("===B()&&"?"!==B(2)){X({type:"at",extglob:!0,value:H,output:""});continue}X({type:"text",value:H});continue}if("*"!==H){"$"!==H&&"^"!==H||(H=`\\${H}`);const e=a.exec(F());e&&(H+=e[0],N.index+=e[0].length),X({type:"text",value:H});continue}if(U&&("globstar"===U.type||!0===U.star)){U.type="star",U.star=!0,U.value+=H,U.output=D,N.backtrack=!0,N.globstar=!0,K(H);continue}let t=F();if(!0!==r.noextglob&&/^\([^?]/.test(t)){Q("star",H);continue}if("star"===U.type){if(!0===r.noglobstar){K(H);continue}const n=U.prev,s=n.prev,o="slash"===n.type||"bos"===n.type,i=s&&("star"===s.type||"globstar"===s.type);if(!0===r.bash&&(!o||t[0]&&"/"!==t[0])){X({type:"star",value:H,output:""});continue}const a=N.braces>0&&("comma"===n.type||"brace"===n.type),c=j.length&&("pipe"===n.type||"paren"===n.type);if(!o&&"paren"!==n.type&&!a&&!c){X({type:"star",value:H,output:""});continue}for(;"/**"===t.slice(0,3);){const r=e[N.index+4];if(r&&"/"!==r)break;t=t.slice(3),K("/**",3)}if("bos"===n.type&&G()){U.type="globstar",U.value+=H,U.output=x(r),N.output=U.output,N.globstar=!0,K(H);continue}if("slash"===n.type&&"bos"!==n.prev.type&&!i&&G()){N.output=N.output.slice(0,-(n.output+U.output).length),n.output=`(?:${n.output}`,U.type="globstar",U.output=x(r)+(r.strictSlashes?")":"|$)"),U.value+=H,N.globstar=!0,N.output+=n.output+U.output,K(H);continue}if("slash"===n.type&&"bos"!==n.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";N.output=N.output.slice(0,-(n.output+U.output).length),n.output=`(?:${n.output}`,U.type="globstar",U.output=`${x(r)}${S}|${S}${e})`,U.value+=H,N.output+=n.output+U.output,N.globstar=!0,K(H+q()),X({type:"slash",value:"/",output:""});continue}if("bos"===n.type&&"/"===t[0]){U.type="globstar",U.value+=H,U.output=`(?:^|${S}|${x(r)}${S})`,N.output=U.output,N.globstar=!0,K(H+q()),X({type:"slash",value:"/",output:""});continue}N.output=N.output.slice(0,-U.output.length),U.type="globstar",U.output=x(r),U.value+=H,N.output+=U.output,N.globstar=!0,K(H);continue}const n={type:"star",value:H,output:D};!0!==r.bash?!U||"bracket"!==U.type&&"paren"!==U.type||!0!==r.regex?(N.index!==N.start&&"slash"!==U.type&&"dot"!==U.type||("dot"===U.type?(N.output+=A,U.output+=A):!0===r.dot?(N.output+=w,U.output+=w):(N.output+=k,U.output+=k),"*"!==B()&&(N.output+=E,U.output+=E)),X(n)):(n.output=H,X(n)):(n.output=".*?","bos"!==U.type&&"slash"!==U.type||(n.output=k+n.output),X(n))}for(;N.brackets>0;){if(!0===r.strictBrackets)throw new SyntaxError(h("closing","]"));N.output=s.escapeLast(N.output,"["),z("brackets")}for(;N.parens>0;){if(!0===r.strictBrackets)throw new SyntaxError(h("closing",")"));N.output=s.escapeLast(N.output,"("),z("parens")}for(;N.braces>0;){if(!0===r.strictBrackets)throw new SyntaxError(h("closing","}"));N.output=s.escapeLast(N.output,"{"),z("braces")}if(!0===r.strictSlashes||"star"!==U.type&&"bracket"!==U.type||X({type:"maybe_slash",value:"",output:`${S}?`}),!0===N.backtrack){N.output="";for(const e of N.tokens)N.output+=null!=e.output?e.output:e.value,e.suffix&&(N.output+=e.suffix)}return N};l.fastpaths=(e,t)=>{const r={...t},i="number"==typeof r.maxLength?Math.min(o,r.maxLength):o,a=e.length;if(a>i)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${i}`);e=u[e]||e;const{DOT_LITERAL:c,SLASH_LITERAL:p,ONE_CHAR:h,DOTS_SLASH:l,NO_DOT:f,NO_DOTS:d,NO_DOTS_SLASH:m,STAR:y,START_ANCHOR:g}=n.globChars(r.windows),O=r.dot?d:f,b=r.dot?m:f,v=r.capture?"":"?:";let S=!0===r.bash?".*?":y;r.capture&&(S=`(${S})`);const E=e=>!0===e.noglobstar?S:`(${v}(?:(?!${g}${e.dot?l:c}).)*?)`,R=e=>{switch(e){case"*":return`${O}${h}${S}`;case".*":return`${c}${h}${S}`;case"*.*":return`${O}${S}${c}${h}${S}`;case"*/*":return`${O}${S}${p}${h}${b}${S}`;case"**":return O+E(r);case"**/*":return`(?:${O}${E(r)}${p})?${b}${h}${S}`;case"**/*.*":return`(?:${O}${E(r)}${p})?${b}${S}${c}${h}${S}`;case"**/.*":return`(?:${O}${E(r)}${p})?${c}${h}${S}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const r=R(t[1]);if(!r)return;return r+c+t[2]}}},T=s.removePrefix(e,{negated:!1,prefix:""});let A=R(T);return A&&!0!==r.strictSlashes&&(A+=`${p}?`),A},e.exports=l},555:(e,t,r)=>{const n=r(270),s=r(390),o=r(290),i=r(379),a=(e,t,r=!1)=>{if(Array.isArray(e)){const n=e.map((e=>a(e,t,r))),s=e=>{for(const t of n){const r=t(e);if(r)return r}return!1};return s}const n=(s=e)&&"object"==typeof s&&!Array.isArray(s)&&e.tokens&&e.input;var s;if(""===e||"string"!=typeof e&&!n)throw new TypeError("Expected pattern to be a non-empty string");const o=t||{},i=o.windows,c=n?a.compileRe(e,t):a.makeRe(e,t,!1,!0),u=c.state;delete c.state;let p=()=>!1;if(o.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};p=a(o.ignore,e,r)}const h=(r,n=!1)=>{const{isMatch:s,match:h,output:l}=a.test(r,c,t,{glob:e,posix:i}),f={glob:e,state:u,regex:c,posix:i,input:r,output:l,match:h,isMatch:s};return"function"==typeof o.onResult&&o.onResult(f),!1===s?(f.isMatch=!1,!!n&&f):p(r)?("function"==typeof o.onIgnore&&o.onIgnore(f),f.isMatch=!1,!!n&&f):("function"==typeof o.onMatch&&o.onMatch(f),!n||f)};return r&&(h.state=u),h};a.test=(e,t,r,{glob:n,posix:s}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const i=r||{},c=i.format||(s?o.toPosixSlashes:null);let u=e===n,p=u&&c?c(e):e;return!1===u&&(p=c?c(e):e,u=p===n),!1!==u&&!0!==i.capture||(u=!0===i.matchBase||!0===i.basename?a.matchBase(e,t,r,s):t.exec(p)),{isMatch:Boolean(u),match:u,output:p}},a.matchBase=(e,t,r)=>(t instanceof RegExp?t:a.makeRe(t,r)).test(o.basename(e)),a.isMatch=(e,t,r)=>a(t,r)(e),a.parse=(e,t)=>Array.isArray(e)?e.map((e=>a.parse(e,t))):s(e,{...t,fastpaths:!1}),a.scan=(e,t)=>n(e,t),a.compileRe=(e,t,r=!1,n=!1)=>{if(!0===r)return e.output;const s=t||{},o=s.contains?"":"^",i=s.contains?"":"$";let c=`${o}(?:${e.output})${i}`;e&&!0===e.negated&&(c=`^(?!${c}).*$`);const u=a.toRegex(c,t);return!0===n&&(u.state=e),u},a.makeRe=(e,t,r=!1,n=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");const o=t||{};let i,c={negated:!1,fastpaths:!0},u="";return e.startsWith("./")&&(e=e.slice(2),u=c.prefix="./"),!1===o.fastpaths||"."!==e[0]&&"*"!==e[0]||(i=s.fastpaths(e,t)),void 0===i?(c=s(e,t),c.prefix=u+(c.prefix||"")):c.output=i,a.compileRe(c,t,r,n)},a.toRegex=(e,t)=>{try{const r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},a.constants=i,e.exports=a},270:(e,t,r)=>{const n=r(290),{CHAR_ASTERISK:s,CHAR_AT:o,CHAR_BACKWARD_SLASH:i,CHAR_COMMA:a,CHAR_DOT:c,CHAR_EXCLAMATION_MARK:u,CHAR_FORWARD_SLASH:p,CHAR_LEFT_CURLY_BRACE:h,CHAR_LEFT_PARENTHESES:l,CHAR_LEFT_SQUARE_BRACKET:f,CHAR_PLUS:d,CHAR_QUESTION_MARK:m,CHAR_RIGHT_CURLY_BRACE:y,CHAR_RIGHT_PARENTHESES:g,CHAR_RIGHT_SQUARE_BRACKET:O}=r(379),b=e=>e===p||e===i,v=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{const r=t||{},S=e.length-1,E=!0===r.parts||!0===r.scanToEnd,R=[],T=[],A=[];let w,P,C=e,M=-1,_=0,x=0,k=!1,$=!1,D=!1,N=!1,j=!1,I=!1,L=!1,H=!1,U=!1,G=0,B={value:"",depth:0,isGlob:!1};const q=()=>M>=S,F=()=>(w=P,C.charCodeAt(++M));for(;M<S;){let e;if(P=F(),P!==i){if(!0===I||P===h){for(G++;!0!==q()&&(P=F());)if(P!==i)if(P!==h){if(!0!==I&&P===c&&(P=F())===c){if(k=B.isBrace=!0,D=B.isGlob=!0,U=!0,!0===E)continue;break}if(!0!==I&&P===a){if(k=B.isBrace=!0,D=B.isGlob=!0,U=!0,!0===E)continue;break}if(P===y&&(G--,0===G)){I=!1,k=B.isBrace=!0,U=!0;break}}else G++;else L=B.backslashes=!0,F();if(!0===E)continue;break}if(P!==p){if(!0!==r.noext&&1==(P===d||P===o||P===s||P===m||P===u)&&C.charCodeAt(M+1)===l){if(D=B.isGlob=!0,N=B.isExtglob=!0,U=!0,!0===E){for(;!0!==q()&&(P=F());)if(P!==i){if(P===g){D=B.isGlob=!0,U=!0;break}}else L=B.backslashes=!0,P=F();continue}break}if(P===s){if(w===s&&(j=B.isGlobstar=!0),D=B.isGlob=!0,U=!0,!0===E)continue;break}if(P===m){if(D=B.isGlob=!0,U=!0,!0===E)continue;break}if(P===f)for(;!0!==q()&&(e=F());)if(e!==i){if(e===O){if($=B.isBracket=!0,D=B.isGlob=!0,U=!0,!0===E)continue;break}}else L=B.backslashes=!0,F();if(!0===r.nonegate||P!==u||M!==_){if(!0!==r.noparen&&P===l){if(D=B.isGlob=!0,!0===E){for(;!0!==q()&&(P=F());)if(P!==l){if(P===g){U=!0;break}}else L=B.backslashes=!0,P=F();continue}break}if(!0===D){if(U=!0,!0===E)continue;break}}else H=B.negated=!0,_++}else{if(R.push(M),T.push(B),B={value:"",depth:0,isGlob:!1},!0===U)continue;if(w===c&&M===_+1){_+=2;continue}x=M+1}}else L=B.backslashes=!0,P=F(),P===h&&(I=!0)}!0===r.noext&&(N=!1,D=!1);let K=C,V="",J="";_>0&&(V=C.slice(0,_),C=C.slice(_),x-=_),K&&!0===D&&x>0?(K=C.slice(0,x),J=C.slice(x)):!0===D?(K="",J=C):K=C,K&&""!==K&&"/"!==K&&K!==C&&b(K.charCodeAt(K.length-1))&&(K=K.slice(0,-1)),!0===r.unescape&&(J&&(J=n.removeBackslashes(J)),K&&!0===L&&(K=n.removeBackslashes(K)));const W={prefix:V,input:e,start:_,base:K,glob:J,isBrace:k,isBracket:$,isGlob:D,isExtglob:N,isGlobstar:j,negated:H};if(!0===r.tokens&&(W.maxDepth=0,b(P)||T.push(B),W.tokens=T),!0===r.parts||!0===r.tokens){let t;for(let n=0;n<R.length;n++){const s=t?t+1:_,o=R[n],i=e.slice(s,o);r.tokens&&(0===n&&0!==_?(T[n].isPrefix=!0,T[n].value=V):T[n].value=i,v(T[n]),W.maxDepth+=T[n].depth),0===n&&""===i||A.push(i),t=o}if(t&&t+1<e.length){const n=e.slice(t+1);A.push(n),r.tokens&&(T[T.length-1].value=n,v(T[T.length-1]),W.maxDepth+=T[T.length-1].depth)}W.slashes=R,W.parts=A}return W}},290:(e,t,r)=>{const{REGEX_BACKSLASH:n,REGEX_REMOVE_BACKSLASH:s,REGEX_SPECIAL_CHARS:o,REGEX_SPECIAL_CHARS_GLOBAL:i}=r(379);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>o.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(i,"\\$1"),t.toPosixSlashes=e=>e.replace(n,"/"),t.removeBackslashes=e=>e.replace(s,(e=>"\\"===e?"":e)),t.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return 3===e.length&&e[0]>=9||8===e[0]&&e[1]>=10},t.escapeLast=(e,r,n)=>{const s=e.lastIndexOf(r,n);return-1===s?e:"\\"===e[s-1]?t.escapeLast(e,r,s-1):`${e.slice(0,s)}\\${e.slice(s)}`},t.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r},t.wrapOutput=(e,t={},r={})=>{let n=`${r.contains?"":"^"}(?:${e})${r.contains?"":"$"}`;return!0===t.negated&&(n=`(?:^(?!${n}).*$)`),n},t.basename=(e,{windows:t}={})=>t?e.replace(/[\\/]$/,"").replace(/.*[\\/]/,""):e.replace(/\/$/,"").replace(/.*\//,"")},203:(e,t,r)=>{var n=r(739);function s(e){if(!Object.prototype.hasOwnProperty.call(o.message,e))throw new Error("invalid status code: "+e);return o.message[e]}function o(e){if("number"==typeof e)return s(e);if("string"!=typeof e)throw new TypeError("code must be a number or string");var t=parseInt(e,10);return isNaN(t)?function(e){var t=e.toLowerCase();if(!Object.prototype.hasOwnProperty.call(o.code,t))throw new Error('invalid status message: "'+e+'"');return o.code[t]}(e):s(t)}e.exports=o,o.message=n,o.code=function(e){var t={};return Object.keys(e).forEach((function(r){var n=e[r],s=Number(r);t[n.toLowerCase()]=s})),t}(n),o.codes=function(e){return Object.keys(e).map((function(e){return Number(e)}))}(n),o.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},o.empty={204:!0,205:!0,304:!0},o.retry={502:!0,503:!0,504:!0}},803:e=>{e.exports=t},598:t=>{t.exports=e},739:e=>{e.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e](o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{s.r(o),s.d(o,{AcceptMime:()=>Fr,AdditionalProperties:()=>Ot,All:()=>gn,AllOf:()=>bt,Allow:()=>St,Any:()=>Et,AnyOf:()=>Rt,ArrayOf:()=>ct,Children:()=>ot,CollectionContains:()=>pt,CollectionOf:()=>at,Const:()=>Tt,Consumes:()=>Kr,ContentType:()=>Zr,Converter:()=>ns,CustomKey:()=>At,CustomKeys:()=>wt,DateFormat:()=>Ft,DateTime:()=>qt,DecoratorContext:()=>Vr,Default:()=>Pt,DefaultMsg:()=>Ct,Delete:()=>Sn,Deprecated:()=>en,Description:()=>Mt,Discriminator:()=>w,DiscriminatorKey:()=>_t,DiscriminatorValue:()=>it,Email:()=>Bt,EndpointMetadata:()=>z,Enum:()=>xt,ErrorMsg:()=>ht,Example:()=>kt,Examples:()=>$t,ExclusiveMaximum:()=>jt,ExclusiveMinimum:()=>Ht,For:()=>fr,Format:()=>Gt,ForwardGroups:()=>Wt,GenericOf:()=>Gr,Generics:()=>Br,Get:()=>On,Groups:()=>Zt,HTTP_STATUS_MESSAGES:()=>qe,Head:()=>En,Header:()=>tn,Hidden:()=>er,Ignore:()=>tr,In:()=>rn,InFile:()=>nn,Integer:()=>rr,JSON_TYPES:()=>S,JsonClassStore:()=>x,JsonEntitiesContainer:()=>m,JsonEntityComponent:()=>_,JsonEntityFn:()=>st,JsonEntityStore:()=>y,JsonFormatTypes:()=>Ut,JsonLazyRef:()=>he,JsonMap:()=>D,JsonMedia:()=>K,JsonMethodStore:()=>W,JsonOperation:()=>J,JsonOperationPathsMap:()=>Q,JsonOperationRoute:()=>kn,JsonParameter:()=>L,JsonParameterStore:()=>H,JsonParameterTypes:()=>N,JsonPropertyStore:()=>k,JsonRequestBody:()=>We,JsonResponse:()=>V,JsonSchema:()=>M,Location:()=>sn,MapOf:()=>ut,Max:()=>Nt,MaxItems:()=>ft,MaxLength:()=>nr,MaxProperties:()=>dt,Maximum:()=>Dt,Min:()=>Lt,MinItems:()=>mt,MinLength:()=>sr,MinProperties:()=>yt,Minimum:()=>It,MultipleOf:()=>or,Name:()=>ir,Nullable:()=>ar,OPERATION_HTTP_VERBS:()=>r,OPERATION_WS_VERBS:()=>n,OneOf:()=>cr,Operation:()=>un,OperationId:()=>pn,OperationMethods:()=>i,OperationPath:()=>hn,OperationVerbs:()=>e,Optional:()=>ur,Options:()=>Tn,ParamMetadata:()=>U,Partial:()=>ln,Patch:()=>Rn,Path:()=>fn,Pattern:()=>pr,Post:()=>bn,Produces:()=>qr,Property:()=>vt,PropertyMetadata:()=>$,Publish:()=>dn,Put:()=>vn,ReadOnly:()=>hr,RecordOf:()=>dr,Redirect:()=>mn,Required:()=>mr,RequiredGroups:()=>yr,Returns:()=>Yr,Route:()=>yn,Schema:()=>lr,Security:()=>An,SpecTypes:()=>ne,Status:()=>wn,Subscribe:()=>Pn,Summary:()=>Cn,Tags:()=>Mn,TimeFormat:()=>Kt,Title:()=>gr,TypeError:()=>Or,UniqueItems:()=>gt,Uri:()=>Vt,Url:()=>Jt,View:()=>_n,WriteOnly:()=>br,allOf:()=>Lr,alterIgnore:()=>Ee,alterOneOf:()=>Ce,alterRequiredGroups:()=>Me,any:()=>Nr,anyMapper:()=>me,anyOf:()=>jr,array:()=>xr,boolean:()=>Tr,buildPath:()=>f,channelsMapper:()=>re,classMapper:()=>ye,concatParameters:()=>Qe,concatPath:()=>xn,createRef:()=>fe,createRefName:()=>le,date:()=>Ar,datetime:()=>wr,defineStatusModel:()=>Wr,email:()=>Cr,enums:()=>Ur,enumsRegistry:()=>b,execMapper:()=>p,formatParameterType:()=>j,from:()=>vr,generateSpec:()=>os,genericsMapper:()=>ge,getComputedType:()=>v,getGenericsMap:()=>ie,getInheritedStores:()=>Y,getJsonEntityStore:()=>X,getJsonPathParameters:()=>Ye,getJsonSchema:()=>as,getJsonSchemaMapper:()=>u,getJsonType:()=>E,getOperationId:()=>et,getOperationsRoutes:()=>cs,getOperationsStores:()=>Z,getProperties:()=>ps,getPropertiesStores:()=>us,getRequiredProperties:()=>_e,getSpec:()=>Un,getSpecType:()=>Gn,getSpecTypeFromSpec:()=>Bn,getStatusConstant:()=>Fe,getStatusMessage:()=>Ke,getStatusModel:()=>zr,hasMapper:()=>h,inheritedClassMapper:()=>Oe,inlineEnums:()=>xe,integer:()=>Er,isParameterType:()=>I,isRedirectionStatus:()=>B,isSuccessStatus:()=>G,itemMapper:()=>be,lazyRef:()=>Hr,lazyRefMapper:()=>ve,makeOf:()=>se,map:()=>kr,mapAliasedProperties:()=>Pe,mapGenericsOptions:()=>ae,mapHeaders:()=>q,mapMapper:()=>Se,mapNullableType:()=>Re,mapOpenSpec:()=>Vn,mapOpenSpec2:()=>Fn,mapOpenSpec3:()=>Kn,mapOpenSpecInfo:()=>qn,mapOperationOptions:()=>an,matchGroups:()=>Yt,mergeSpec:()=>Ln,messageMapper:()=>oe,number:()=>Sr,object:()=>Dr,objectMapper:()=>Te,ofMapper:()=>Ae,oneOf:()=>Ir,oneOfMapper:()=>l,operationIdFormatter:()=>Ze,operationInFilesMapper:()=>je,operationInParameterMapper:()=>Ie,operationInParametersMapper:()=>Le,operationInQueryMapper:()=>Ue,operationMapper:()=>Ve,operationMediaMapper:()=>Je,operationRequestBodyMapper:()=>ze,operationResponseMapper:()=>Xe,parameters:()=>Dn,pathsMapper:()=>nt,payloadMapper:()=>ue,popGenerics:()=>ce,propertiesMapper:()=>we,registerJsonSchemaMapper:()=>c,removeHiddenOperation:()=>ee,responsePayloadMapper:()=>pe,schemaMapper:()=>De,schemesReducer:()=>$n,security:()=>Nn,serializeEnum:()=>R,serializeEnumValues:()=>T,set:()=>$r,string:()=>Rr,tagsReducer:()=>jn,time:()=>Pr,toJsonMapCollection:()=>F,toJsonRegex:()=>A,toRef:()=>de,transformInformation:()=>rs,transformSecurity:()=>ts,transformToOS2:()=>ss,uri:()=>Mr,url:()=>_r,withErrorMsg:()=>lt});var e,t=s(598);!function(e){e.ALL="ALL",e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.HEAD="HEAD",e.DELETE="DELETE",e.OPTIONS="OPTIONS",e.TRACE="TRACE",e.PUBLISH="PUBLISH",e.SUBSCRIBE="SUBSCRIBE",e.CUSTOM="CUSTOM"}(e||(e={}));const r=[e.ALL,e.GET,e.POST,e.PUT,e.PATCH,e.HEAD,e.DELETE,e.OPTIONS,e.TRACE,e.CUSTOM],n=[e.PUBLISH,e.SUBSCRIBE],i=e,a=new Map;function c(e,t,r){return a.set(r?`${r}:${e}`:e,t)}function u(e,t){const r=a.get(`${t?.specType}:${e}`)||a.get(e);if(r)return r;throw new Error(`JsonSchema ${e} mapper doesn't exists`)}function p(e,t,r,n){return u(e,r)(...t,r,n)}function h(e){return a.has(e)}function l(e,t){return e.find((e=>a.has(`${t?.specType}:${e}`)))||e.find((e=>a.has(e)))}function f(e){return e.split("/").filter(Boolean).join("/")}var d=s(803);const m=new Map;class y{propertyKey;propertyName;index;descriptor;decoratorType;collectionType;token;store;isStore=!0;parent;target;_type;_schema;constructor(e){const{target:t,propertyKey:r,descriptor:n,index:s,decoratorType:o}=e;this.target=t,this.propertyKey=r,this.propertyName=String(r),this.descriptor=n,this.index=s,this.decoratorType=o,this.token=t,this.store=e.store,this.parent=this}get targetName(){return(0,d.nameOf)(this.token)}get isCollection(){return!!this.collectionType}get isArray(){return(0,d.isArrayOrArrayClass)(this.collectionType)}get discriminatorAncestor(){const e=(0,d.ancestorsOf)(this.target).find((e=>y.from(e).schema.isDiscriminator));return e&&y.from(e)}get isPrimitive(){return(0,d.isPrimitiveOrPrimitiveClass)(this._type)}get isDate(){return(0,d.isDate)(this.computedType)}get isObject(){return(0,d.isObject)(this.computedType)}get isClass(){return(0,d.isClass)(this.computedType)}get schema(){return this._schema}get nestedGenerics(){return this.schema.nestedGenerics}set nestedGenerics(e){this.schema.nestedGenerics=e}get type(){return this._type}set type(e){this._type=e,this.build()}get computedType(){return this.itemSchema.getComputedType()}get itemSchema(){return this.isCollection?this.schema.itemSchema():this.schema}get parentSchema(){return this.parent.schema}get isDiscriminatorChild(){return this.schema.isDiscriminator&&this.discriminatorAncestor?.schema.discriminator().base!==this.target}static from(...e){if(e[0].isStore)return e[0];const t=e[0];e.length>1&&(e[0]=(0,d.prototypeOf)(e[0]));const r=d.Store.from(...e);if(!r.has("JsonEntityStore")){const n=(0,d.decoratorTypeOf)(e),s=new(m.get(n))({store:r,decoratorType:n,target:(0,d.classOf)(t),propertyKey:e[1],index:"number"==typeof e[2]?e[2]:void 0,descriptor:"object"==typeof e[2]?e[2]:void 0});s.build(),r.set("JsonEntityStore",s)}return r.get("JsonEntityStore")}static fromMethod(e,t){return this.from(e,t,(0,d.descriptorOf)(e,t))}static get(e,t,r){return y.from((0,d.prototypeOf)(e),t,r)}isGetterOnly(){return(0,d.isObject)(this.descriptor)&&!this.descriptor.value&&this.descriptor.get&&!this.descriptor.set}get(e,t){return this.store.get(e,t)}set(e,t){return this.store.set(e,t)}toString(){return[this.targetName,this.propertyName,this.index].filter((e=>void 0!==e)).join(":")}buildType(e){(0,d.isCollection)(e)?this.collectionType=e:(this._type=e,this._type&&(0,d.isPlainObject)(this._type)&&(this._type=String))}getBestType(){return this.itemSchema.hasDiscriminator?this.itemSchema.discriminator().base:(0,d.isClassObject)(this.type)?this.itemSchema.getTarget():(0,d.isArrowFn)(this.type)?this.type():this.type}}function g(e,t,r,n){var s,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function O(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const b=new Map;function v(e){return(0,d.isPromise)(e)||e===Function?Object:(0,d.isClass)(e)||(0,d.isSymbol)(e)||(0,d.isPrimitiveOrPrimitiveClass)(e)||(0,d.isClassObject)(e)||(0,d.isDate)(e)||(0,d.isCollection)(e)?(0,d.classOf)(e):(0,d.isArrowFn)(e)?e():e}const S=["string","number","integer","boolean","object","array","null","any"];function E(e){return null===e?"null":(0,d.isPrimitiveOrPrimitiveClass)(e)?S.indexOf(e)>-1?e:"string"==typeof e?"file"===e?"file":"generic":(0,d.primitiveOf)(e):e===Array?"array":(0,d.isArray)(e)?e.map(E):e===Set?"array":(0,d.isDate)(e)||(0,d.isBuffer)(e)?"string":"object"}const R=e=>(0,d.isObject)(e)&&null!==e?Object.entries(e).reduce(((e,[t,r])=>isNaN(+t)?e.concat(r):e),[]):e;function T(e){const t=e.reduce(((e,t)=>e.concat(R(t))),[]),r=t.reduce(((e,t)=>e.add((e=>null===e?"null":typeof e)(t))),new Set);return{values:(0,d.uniq)(t),types:r}}function A(e){return String(e).replace(/^(\/)(.*)(\/)$/,"$2")}class w{propertyName;base;values=new Map;types=new Map;constructor({base:e,propertyName:t,types:r,values:n}={}){Object.assign(this,(0,d.cleanObject)({base:e,propertyName:t,types:r?new Map(r):void 0,values:n?new Map(n):void 0}))}add(e,t){return t.forEach((t=>{this.values.set(t,e)})),this.types.set(e,t),this}getType(e){return this.values.get(e)||this.base}getValues(e){return this.types.get(e)}getDefaultValue(e){const t=this.types.get(e);return t?t[0]:void 0}children(){return[...new Set([...this.types.keys()])]}}function P(e){return e instanceof M?e:Object.entries(e).reduce(((e,[t,r])=>(e[A(t)]=C(r),e)),{})}function C(e){return(0,d.isArray)(e)?e.map(C):e.isStore||e.$isJsonDocument||e.isLazyRef?e:(0,d.classOf)(e)!==Object&&(0,d.isClass)(e)?y.from(e).schema:(0,d.isObject)(e)?M.from(e):(0,d.isPrimitiveClass)(e)?M.from({type:e}):e}class M extends Map{$kind="schema";$isJsonDocument=!0;$hooks=new d.Hooks;$required=new Set;$allow=[];$selfRequired;$forwardGroups=!1;$ignore=!1;isDiscriminatorKey=!1;isDiscriminator=!1;#t=!1;#e=null;#r;#o=[];#n=new Map;#i;#s;#a=!1;#c=!1;#u=!1;constructor(e={}){super(),e&&this.assign(e)}get alias(){return this.#n}get nestedGenerics(){return this.#o}set nestedGenerics(e){this.#o=e}get genericLabels(){return this.#r}set genericLabels(e){this.#r=e}get isClass(){return(0,d.isClass)(this.class)&&![Map,Array,Set,Object,Date,Boolean,Number,String].includes(this.#s)}get isCollection(){return this.#c}get isGeneric(){return this.#a}get discriminatorAncestor(){const e=(0,d.ancestorsOf)(this.#s).find((e=>y.from(e).schema.isDiscriminator));return e&&y.from(e).schema}get hasGenerics(){return!(!this.nestedGenerics||!this.nestedGenerics.length)}get genericType(){return this.get("$ref")}get class(){return this.getComputedType()}get canRef(){return this.#u}get isNullable(){return this.#t||this.$allow.includes(null)}get isReadOnly(){return this.get("readOnly")}get isWriteOnly(){return this.get("writeOnly")}get hasDiscriminator(){return!!this.#e}static from(e={}){return new M(e)}nullable(e){this.#t=e}itemSchema(e={}){return this.#i=this.#i||C(e),this.#i.assign(e),this.#i}getAliasOf(e){return this.#n.get(e)}addAlias(e,t){return this.#n.set(e,t),this.#n.set(t,e),this}removeAlias(e){const t=this.#n.get(e);return t&&this.#n.delete(t),this.#n.delete(e),this}$id(e){return super.set("$id",e),this}$ref(e){return super.set("$ref",e),this}$schema(e){return super.set("$schema",e),this}label(e){return this.#u=!0,super.set("name",e),this}name(e){return super.set("name",e),this}ignore(e){return"boolean"!=typeof e&&this.$hooks.on("ignore",e),this.$ignore=e,this}default(e){return super.set("default",e),this}const(e){return super.set("const",e),this}description(e){return super.set("description",e),this}discriminator(){return this.isDiscriminator=!0,this.#e=this.#e||new w({base:this.#s})}discriminatorKey(e){return this.discriminator().propertyName=e,this.isDiscriminator=!0,this}discriminatorValue(...e){const t=this.discriminatorAncestor.discriminator();t.add(this.#s,e),this.isDiscriminator=!0;const r=this.get("properties"),n=r[t.propertyName]||new M({type:"string"});return 1===e.length?(n.const(e[0]),n.examples([e[0]])):(n.enum(...e),n.examples(e)),r[t.propertyName]=n,this.set("properties",r),this}additionalItems(e){return super.set("additionalItems",C(e)),this}contains(e){return super.set("contains",C(e)),this}examples(e){return super.set("examples",e),this}example(...e){return this.examples(e)}items(e){return super.set("items",this.#i=C(e)),this}maxItems(e){return super.set("maxItems",e),this}minItems(e){return super.set("minItems",e),this}uniqueItems(e){return super.set("uniqueItems",e),this}maxProperties(e){return super.set("maxProperties",e),this}minProperties(e){return super.set("minProperties",e),this}allow(...e){return this.$allow.push(...e),this}required(e=!0){if(!(0,d.isArray)(e)){const t=this.clone();return t.$selfRequired=e,t}return this.$required.clear(),e.forEach((e=>this.$required.add(e))),this}addRequired(e){return this.$required.add(e),this}removeRequired(e){return this.$required.delete(e),this}isRequired(e){return this.$required.has(e)}properties(e){return super.set("properties",P(e)),this}addProperty(e,t){const r=this.get("properties")||{};return r[e]=t,super.set("properties",P(r)),this}patternProperties(e){return super.set("patternProperties",P(e)),this}additionalProperties(e){return super.set("additionalProperties",C(e)),this}unknown(e=!0){return this.additionalProperties(e)}dependencies(e){return super.set("dependencies",P(e)),this}propertyNames(e){return super.set("propertyNames",C(e)),this}enum(e,...t){if(b.has(e))return this.enum(b.get(e));if(e instanceof M)e.getName()?super.set("enum",e):super.set("enum",e.get("enum")).any(...e.getJsonType());else{const{values:r,types:n}=T([e,t].flat());super.set("enum",r).any(...n)}return this}definitions(e){return super.set("definitions",P(e)),this}allOf(e){return super.set("allOf",e.map(C)),this}anyOf(e){return super.set("anyOf",e.map(C)),this}oneOf(e){let t=e.map(C);if(1===t.length&&!(e[0]instanceof M)){if(!t[0].hasDiscriminator)return this.type(e[0]);const r=t[0].discriminator().children();if(!r.length)return this.type(e[0]);t=r.map(C)}super.set("oneOf",t);const r=t[0];if(r.isDiscriminator){const e=r.discriminatorAncestor.discriminator(),{propertyName:t}=e;super.set("discriminator",{propertyName:t}),this.isDiscriminator=!0,this.#e=e}return this}not(e){return super.set("not",C(e)),this}multipleOf(e){return super.set("multipleOf",e),this}maximum(e){return super.set("maximum",e),this}exclusiveMaximum(e){return super.set("exclusiveMaximum",e),this}minimum(e){return super.set("minimum",e),this}exclusiveMinimum(e){return super.set("exclusiveMinimum",e),this}maxLength(e){return super.set("maxLength",e),this}minLength(e){return super.set("minLength",e),this}pattern(e){return super.set("pattern",A(e)),this}format(e){return super.set("format",e),this}type(e){switch(e){case Map:super.set("type",E(e)),this.#s=e,this.#c=!0,this.has("additionalProperties")||super.set("additionalProperties",this.itemSchema({}));break;case Array:super.set("type",E(e)),this.#s=e,this.#c=!0,this.has("items")||super.set("items",this.itemSchema({}));break;case Set:super.set("type",E(e)),this.#s=e,this.#c=!0,this.uniqueItems(!0),this.has("items")||super.set("items",this.itemSchema({}));break;case"integer":super.set("type",E(e)),this.integer();break;case Object:case Date:case Boolean:case Number:case String:super.set("type",E(e)),this.#s=e,this.has("properties")||super.set("properties",{});break;default:if((0,d.isClass)(e)||(0,d.isFunction)(e))super.set("type",void 0),this.#s=e,this.has("properties")||super.set("properties",{});else{const t=E(e);"generic"===t?(this.#a=!0,super.set("$ref",e)):super.set("type",t)}}return this}any(...e){return e.filter((e=>(0,d.isClass)(e))).length>=2?this.oneOf(e.filter((e=>null!==e&&(this.nullable(!0),!0)))):(e.length?(e=(0,d.uniq)(e).map(E)).includes("null")&&(this.nullable(!0),e=e.filter((e=>"null"!==e))):(e=["integer","number","string","boolean","array","object"],this.nullable(!0)),this.type(1===e.length?e[0]:e)),this}integer(){return super.set("type","integer"),super.set("multipleOf",1),this}title(e){return super.set("title",e),this}readOnly(e){return super.set("readOnly",e),this}writeOnly(e){return super.set("writeOnly",e),this}customKey(e,t){return super.set(`#${e}`,t),this}toObject(e){return this.toJSON(e)}toJSON(e){return p("schema",[this],e)}assign(e={}){return(e instanceof M?[...e.entries()]:Object.entries(e)).forEach((([e,t])=>{this.set(e,t)})),e instanceof M&&(this.$selfRequired=e.$selfRequired,this.$allow.push(...e.$allow),e.$required.forEach((e=>{this.$required.add(e)})),this.#e=this.#e?new w(this.#e):null,this.isDiscriminator=e.isDiscriminator,this.isDiscriminatorKey=e.isDiscriminatorKey,this.#u=e.#u,this.#n=new Map(this.#n.entries()),e.#r&&(this.#r=[...e.#r]),this.#o=e.#o.map((e=>[...e])),this.#s=e.#s,this.#a=e.#a,this.#c=e.#c,this.#u=e.#u,super.set("type",e.get("type"))),this}set(e,t){return e in this?(0,d.isFunction)(this[e])&&this[e](t):super.set(e,t),this}getComputedType(){return v(this.#s)}getComputedItemType(){return this.#i?this.#i.getComputedType():this.getComputedType()}getJsonType(){return this.get("type")||E(this.getComputedType())}getTarget(){return this.#s}getName(){return this.get("name")||((0,d.isClass)(this.#s)?(0,d.nameOf)((0,d.classOf)(this.getComputedType())):"")}clone(){return new M(this)}}function _(e){return t=>{m.set(e,t)}}let x=class extends y{children=new Map;get path(){return this.store.get("path","/")}set path(e){this.store.set("path",e)}build(){this._type||this.buildType(this.target),this._type=this._type||Object,this._schema=M.from({type:this.type})}};x=g([_(d.DecoratorTypes.CLASS)],x);let k=class extends y{parent=y.from(this.target);get required(){return this.parent.schema.isRequired(this.propertyKey)}set required(e){e?this.parent.schema.addRequired(this.propertyKey):this.parent.schema.removeRequired(this.propertyKey)}get allowedRequiredValues(){return this.schema.$allow}discriminatorKey(){return this.parent.schema.discriminatorKey(String(this.propertyKey)),this.itemSchema.isDiscriminatorKey=!0,this}isDiscriminatorKey(){return this.itemSchema.isDiscriminatorKey}isRequired(e){return this.required&&[void 0,null,""].includes(e)&&!this.allowedRequiredValues.includes(e)}build(){this._type||this.buildType(d.Metadata.getType((0,d.prototypeOf)(this.target),this.propertyKey)),this._type=this._type||Object;let e=this.parent.schema.get("properties")[this.propertyName];e||(this.parent.children.set(this.propertyName,this),e=M.from({type:this.collectionType||this.type}),this.collectionType&&e.itemSchema(this.type)),this.parent.schema.addProperty(this.propertyName,e),this._schema=e}static get(e,t){return y.from((0,d.prototypeOf)(e),t)}};k=g([_(d.DecoratorTypes.PROP)],k);const $=k;class D extends Map{$kind="map";$isJsonDocument=!0;constructor(e={}){super(),this.assign(e)}assign(e={}){return Object.entries(e).forEach((([e,t])=>{(0,d.isFunction)(this[e])?this[e](t):this.set(e,t)})),this}toJSON(e){return p("map",[this],e)}}var N;function j(e){return String(e).toLowerCase().replace("raw_","").replace("cookies","cookie")}function I(e){return Object.values(N).includes(j(e))}!function(e){e.BODY="body",e.PATH="path",e.QUERY="query",e.HEADER="header",e.COOKIES="cookie",e.FILES="files"}(N||(N={}));class L extends D{$kind="operationInParameter";nestedGenerics=[];groups;groupsName;$schema;expression;getName(){const e=this.get("name");return"files"===this.get("in")?e.split(".")[0]:e}name(e){return this.set("name",e),this}examples(e){return super.set("examples",e),this}description(e){return this.set("description",e),this}in(e,t=""){return this.set("in",j(e)),this.expression=t,this}required(e){return this.set("required",e),this}schema(e){return this.$schema=e,this}toJSON(e){return p("operationInParameter",[this],e)}}let H=class extends y{paramType;expression;dataPath;pipes;parameter=new L;parent=y.fromMethod(this.target,this.propertyKey);constructor(e){super(e),this.pipes=e.pipes||[],this.paramType=e.paramType||this.paramType,this.expression=e.expression||this.expression,this.dataPath=e.dataPath||this.dataPath}get nestedGenerics(){return this.parameter.nestedGenerics}set nestedGenerics(e){this.parameter.nestedGenerics=e}get required(){return!!this.parameter.get("required")}set required(e){this.parameter.required(e)}get allowedRequiredValues(){return this.schema.$allow}static getParams(e,t){const r=[],n=(0,d.ancestorsOf)(e).reverse().find((e=>(0,d.isMethodDescriptor)(e,t)&&y.fromMethod(e,t).children.size));return n?(y.fromMethod(n,t).children.forEach(((e,t)=>{r[+t]=e})),r):[]}static get(e,t,r){return y.from((0,d.prototypeOf)(e),t,r)}isRequired(e){return this.required&&[void 0,null,""].includes(e)&&!this.allowedRequiredValues.includes(e)}getSchema(e){return(0,d.isCollection)(e)||!(0,d.isClass)(e)?M.from({type:e}):y.from(e).schema}build(){if(!this._type){const e=d.Metadata.getParamTypes((0,d.prototypeOf)(this.target),this.propertyKey)[this.index];this.buildType(e)}this._type=this._type||Object,this._schema||(this.parent.children.set(this.index,this),this._schema=this.getSchema(this.collectionType||this.type),this.parameter.schema(this._schema),this.collectionType&&this._schema.itemSchema(this.getSchema(this.type)),this.parent.operation.addParameter(this.index,this.parameter))}};H=g([_(d.DecoratorTypes.PARAM),O("design:paramtypes",[Object])],H);const U=H,G=e=>Number(e)&&200<=Number(e)&&Number(e)<300,B=e=>Number(e)&&300<=Number(e)&&Number(e)<400;function q(e){return Object.keys(e).reduce(((t,r)=>{const n=e[r];let s=typeof n,o={example:n};return"object"===s&&(o=n,o.example=void 0===o.value?o.example:o.value,delete o.value,s=typeof o.example),o.type=o.type||s,t[r]=(0,d.cleanObject)(o),t}),{})}function F(e,t=D){return Object.entries(e).reduce(((e,[r,n])=>(e.set(r,new t(n)),e)),new D)}class K extends D{$kind="operationMedia";groups=[];groupsName;allowedGroups;schema(e){return this.set("schema",e),this}examples(e){return this.set("examples",e),this}}class V extends D{$kind="operationResponse";status;constructor(e={}){super(e),this.content(e.content||{})}description(e){return this.set("description",e),this}headers(e){return this.set("headers",q(e)),this}content(e){return this.set("content",F(e,K)),this}getContent(){return this.get("content")}getMedia(e,t=!0){return t&&this.addMedia(e),this.getContent()?.get(e)}addMedia(e){const t=this.get("content");return t.has(e)||t.set(e,new K),this}}class J extends D{$kind="operation";operationPaths=new Map;#p;#h=!1;constructor(e={}){super({parameters:[],responses:new D,...e})}get response(){return this.getResponses().get(this.getStatus().toString())}get status(){return this.#p}tags(e){return super.set("tags",e),this}addTags(e){return e=(0,d.uniqBy)([...this.get("tags")||[],...e],"name"),this.tags(e)}summary(e){return super.set("summary",e),this}operationId(e){return this.set("operationId",e),this}responses(e){return this.set("responses",e),this}defaultStatus(e){return this.#p=e,this}getStatus(){return this.#p||200}setRedirection(e=302){return this.#h=!0,this.#p=e,this}isRedirection(e){return this.#h&&e?B(e):this.#h}addResponse(e,t){if((G(e)||B(e))&&!this.#p){const t=this.getResponseOf(200);this.getResponses().set(e.toString(),t).delete("200"),this.defaultStatus(Number(e))}const r="default"===e?this.getStatus().toString():e.toString(),n=this.getResponses().get(r);return n?(t.forEach(((e,t)=>{["content"].includes(t)||n.set(t,(0,d.deepMerge)(n.get(t),e))})),n.status=Number(r)):(t.status=Number(r),this.getResponses().set(r,t)),this}getResponses(){return this.get("responses")}getResponseOf(e){return("default"===e?this.response:this.getResponses().get(String(e)))||new V}ensureResponseOf(e){return this.addResponse(e,this.getResponseOf(e)),this.getResponseOf(e)}getHeadersOf(e){return this.getResponseOf(e).get("headers")||{}}getContentTypeOf(e){return[...this.getResponseOf(e).get("content").keys()].slice(-1)[0]}security(e){return this.set("security",e),this}addSecurityScopes(e,t){const r=this.get("security")||{};return r[e]=(0,d.uniq)([...r[e]||[],...t]),this.security(r)}description(e){return super.set("description",e),this}deprecated(e){return super.set("deprecated",e),this}parameters(e){return super.set("parameters",e),this}addParameter(e,t){-1===e&&(e=this.get("parameters").length),this.get("parameters")[e]=t}consumes(e){return super.set("consumes",e),this}produces(e){return super.set("produces",e),this}addProduce(e){const t=(0,d.uniq)([].concat(this.get("produces"),e)).filter(Boolean);this.set("produces",t)}addOperationPath(e,t,r={}){return this.operationPaths.set(String(e)+String(t),{...r,method:e,path:t}),this}getAllowedOperationPath(e){return e?[...this.operationPaths.values()].filter((({method:t})=>t&&e.includes(t.toUpperCase()))):[...this.operationPaths.values()]}}let W=class extends y{parent=y.from(this.target);middlewares=[];beforeMiddlewares=[];afterMiddlewares=[];operation=new J;children=new Map;constructor(e){super({store:d.Store.fromMethod(e.target,e.propertyKey),descriptor:(0,d.descriptorOf)(e.target,e.propertyKey),...e});const{beforeMiddlewares:t=[],middlewares:r=[],afterMiddlewares:n=[]}=e;this.after(n),this.before(t),this.use(r)}get params(){return this.parameters}get view(){return this.store.get("view")}set view(e){this.store.set("view",e)}get acceptMimes(){return this.store.get("acceptMimes",[])}set acceptMimes(e){this.store.set("acceptMimes",e)}get parameters(){return[...this.children.values()]}get operationPaths(){return this.operation.operationPaths}static get(e,t,r){return r=r||(0,d.descriptorOf)((0,d.prototypeOf)(e),t),y.from((0,d.prototypeOf)(e),t,r)}getResponseOptions(e,{contentType:t="application/json",includes:r}={}){const n=this.operation.getResponseOf(e).getMedia(t,!1);if(n&&n.has("schema")){const e=n.get("schema");let t=n.groups;return r&&n.allowedGroups?.size&&(t=[...t||[],...r.filter((e=>n.allowedGroups.has(e)))]),{type:e.getComputedItemType(),groups:t}}return{type:this.type}}before(e){return this.beforeMiddlewares=this.beforeMiddlewares.concat(e).filter(d.isFunction),this}after(e){return this.afterMiddlewares=this.afterMiddlewares.concat(e).filter(d.isFunction),this}use(e){return this.middlewares=this.middlewares.concat(e).filter(d.isFunction),this}get(e){const t=d.Store.from(this.target).get(e);return(0,d.deepMerge)(t,this.store.get(e))}getParamTypes(){return[...this.children.values()].reduce(((e,t)=>({...e,[t.paramType]:!0})),{})}build(){if(!this._type){let e=d.Metadata.getReturnType(this.target,this.propertyKey);e=(0,d.isPromise)(e)?void 0:e,this.buildType(e)}this._type=this._type||Object,this.parent.children.set(this.propertyName,this),(0,d.isCollection)(this._type)&&(this.collectionType=this._type,delete this._type),this._schema=M.from({type:this.collectionType||this.type}),this.collectionType&&this._schema.itemSchema(this.type),this.parent.schema.addProperty(this.propertyName,this.schema)}};W=g([_(d.DecoratorTypes.METHOD),O("design:paramtypes",[Object])],W);const z=W;function X(...e){return y.from(...e)}m.set(d.DecoratorTypes.CLASS,x),m.set(d.DecoratorTypes.PROP,k),m.set(d.DecoratorTypes.PARAM,H),m.set(d.DecoratorTypes.METHOD,W);class Q extends Map{$kind="operationPaths";$isJsonDocument=!0;setOperationPath(e){const t=this.getKey(e.method,e.path);this.set(t,e)}getKey=(e,t)=>`${e}-${t}`}function Y(e){const t=e.isStore?e:X(e);return t.$inherited||(t.$inherited=(0,d.ancestorsOf)(t.target).reverse().reduce(((e,t)=>e.set(t,X(t))),new Map)),t.$inherited}function Z(e){const t=e.isStore?e:X(e);if(!t.$operations){const e=new Q;t.$operations=new Map,Y(t).forEach((e=>{e.children.forEach((e=>{e instanceof W&&!t.$operations.has(e.propertyKey)&&t.$operations.set(e.propertyKey,e)}))})),t.$operations.forEach((t=>{t.operation.operationPaths.forEach((t=>{e.setOperationPath(t)}))})),e.clear()}return t.$operations}function ee(e){return!e.store.get("hidden")}const te=[e.PUBLISH,e.SUBSCRIBE];function re(e,{channels:r,rootPath:n,...s}){const o=f(n+X(e).path);return s={...s,ctrlRootPath:o},[...Z(e).values()].filter(ee).flatMap((e=>{const t=e.operation.getAllowedOperationPath(te);return 0===t.length?[]:t.map((t=>({operationPath:t,operationStore:e})))})).reduce(function(e){return(r,{operationPath:n,operationStore:s})=>{const o=e.ctrlRootPath||"/",i=n.method.toLowerCase(),a=(0,t.camelCase)(`${i.toLowerCase()} ${s.parent.schema.getName()}`),c=p("message",[s,n],e);return{...r,[o]:{...r[o],[i]:{...r[o]?.[i],operationId:a,message:{oneOf:[...r[o]?.[i]?.message?.oneOf||[],c]}}}}}}(s),r)}var ne;function se(e,t){return t.length?1===t.length?t[0]:{[e]:t}:null}function oe(t,r,{tags:n=[],defaultTags:s=[],...o}={}){const{path:i,method:a}=r,c=String(i);let u=(0,d.getValue)(o.components,"messages."+i,(0,d.cleanObject)({description:t.operation.get("description"),summary:t.operation.get("summary")}));if(a.toUpperCase()===e.PUBLISH){const n=p("payload",[t,r],o);n&&(u.payload=n);const s=se("oneOf",t.operation.getAllowedOperationPath([e.SUBSCRIBE]).map((e=>p("message",[t,e],o))).filter(Boolean));s&&(u["x-response"]=s)}else{const e=p("response",[t,r],o);e&&(u["x-response"]=e)}return o.components.messages=o.components.messages||{},o.components.messages[c]=u,{$ref:`#/components/messages/${c}`}}function ie(e,t){return e.reduce(((e,r,n)=>e.set(r,t[n])),new Map)}function ae(e){if(e.genericLabels&&e.genericTypes){const{genericLabels:t,genericTypes:r,...n}=e;return{...n,generics:ie(t,r)}}return e}function ce(e){const[t,...r]=e.nestedGenerics;return{genericTypes:t,nestedGenerics:r}}function ue(e,r,n){const s=e.operation.get("parameters").filter((e=>I(e.get("in")))),o=(0,t.pascalCase)([r.path,r.method,"Payload"].join(" "));(0,d.setValue)(n,`components.schemas.${o}`,{});const i=s.map((e=>{const t=function(e,t={}){return{...t,groups:e.groups,groupsName:e.groupsName}}(e,n),r=p("item",[e.$schema],{...t,...ce(e)});switch(e.get("in")){case N.BODY:return r;case N.QUERY:case N.PATH:case N.HEADER:return{type:"object",properties:{[e.get("name")]:r}}}return r}),{}).filter(Boolean);return se("allOf",i)}function pe(e,r,n){const s=e.operation.getResponses(),o=[],i=[],a=[],c=[];[...s.entries()].forEach((([e,t])=>{const r=p("map",[t],n);if(o.push(+e),i.push(r.description),204!=+e){const{content:e}=r,t=e[Object.keys(e)[0]];a.push(t)}}));const u=(0,t.pascalCase)([r.path,r.method,"Response"].join(" ")),h={type:"object",properties:{status:{type:"number",enum:o},statusText:{type:"string",enum:i}},required:["status"]},l=se("oneOf",a);l&&(0,d.setValue)(h,"properties.data",l);const f=se("oneOf",c);return c.length&&(0,d.setValue)(h,"properties.error",f),(0,d.setValue)(n,`components.schemas.${u}`,h),{$ref:`#/components/schemas/${u}`}}c("channels",re),function(e){e.JSON="jsonschema",e.SWAGGER="swagger2",e.OPENAPI="openapi3",e.ASYNCAPI="asyncapi2"}(ne||(ne={})),c("generate",(function(e,t){const r={channels:p("channels",[e],t)};return r.tags=(0,d.uniqBy)(t.tags,"name"),t.components?.schemas&&Object.keys(t.components.schemas).length&&(r.components={...t.components,schemas:t.components.schemas}),r}),ne.ASYNCAPI),c("message",oe,ne.ASYNCAPI),c("payload",ue,ne.ASYNCAPI),c("response",pe,ne.ASYNCAPI);class he{getType;isLazyRef=!0;constructor(e){this.getType=e}get target(){return this.getType()}get schema(){return X(this.getType()).schema}get name(){return(0,d.nameOf)(this.getType())}}function le(e,r){return r.groups&&r.groups.length?(0,t.pascalCase)(`${e} ${r.groupsName||r.groups.join(" ")}`):e}function fe(e,t,r){const n=function(e){const{host:t="#/"+([ne.OPENAPI,ne.ASYNCAPI].includes(e.specType)?"components/schemas":"definitions")}=e;return t}(r),s={$ref:`${n}/${e}`},o=t.isNullable,i=t.isReadOnly,a=t.isWriteOnly;if(o||i||a)switch(r.specType){case ne.OPENAPI:return(0,d.cleanObject)({nullable:!!o||void 0,readOnly:!!i||void 0,writeOnly:!!a||void 0,oneOf:[s]});case ne.JSON:return(0,d.cleanObject)({readOnly:i,writeOnly:a,oneOf:[s]})}return s}function de(e,t,r){const n=le(e.getName(),r);return(0,d.setValue)(r,`components.schemas.${n}`,t),fe(n,e,r)}function me(e,t={}){if("object"!=typeof e||null===e)return e;if(e instanceof he)return p("lazyRef",[e],t);if(e instanceof M&&e.get("enum")instanceof M){const r=e.get("enum");return de(r,r.toJSON(t),t)}if(e.$kind&&e.$isJsonDocument){const r=p(l([e.$kind,"map"],t),[e],ae(t));return e.canRef?de(e,r,t):r}return p("object",[e],t)}function ye(e,t){const r=y.from(e.class),n=le(r.schema.getName()||e.getName(),t);if(e.hasGenerics){const{type:n,properties:s,additionalProperties:o,items:i,...a}=e.toJSON(t),c={...p("any",[r.schema],{...t,...ce(e),root:!1}),...a};if(c.title){const r=le(c.title,t);return(0,d.setValue)(t.components,`schemas.${r}`,c),delete c.title,fe(r,e,t)}return c}return(0,d.getValue)(t,`components.schemas.${n}`)||((0,d.setValue)(t,`components.schemas.${n}`,{}),t.components.schemas[n]=p("any",[r.schema],ae({...t,root:!1}))),fe(n,e,t)}function ge(e,t){const{generics:r}=t;if(r&&e.$ref&&r.has(e.$ref)){let n=r.get(e.$ref);if((0,d.isPrimitiveClass)(n))return{type:E(n)};if(n===Date)return{type:"string",format:"date-time"};if(n.toJSON)return n.toJSON({...t,generics:void 0});if(n===Object)return{type:"object"};if((0,d.isClass)(n)){const e={class:n};return 0===t.nestedGenerics.length?p("class",[e],{...t,generics:void 0}):p("schema",[y.from(e.class).schema],{...t,...ce(t),root:!1})}}return e}function Oe(e,{target:t,...r}){const n=Array.from(Y(t).entries()).filter((([e])=>(0,d.classOf)(e)!==(0,d.classOf)(t)));if(n.length){const t=n.reduce(((e,[,t])=>(0,d.deepMerge)(e,p("schema",[t.schema],r))),{});e=(0,d.deepMerge)(t,e)}return e}function be(e,t){return e&&e.isClass?p("class",[e],t):p("any",[e],t)}function ve(e,t){const r=e.name;if(t.$refs?.find((t=>t===e.target)))return fe(r,e.schema,t);t.$refs=[...t.$refs||[],e.target];const n=e.getType()&&p("schema",[e.schema],ae(t));return de(e.schema,n,t)}function Se(e,{ignore:t=[],...r}={}){return r=ae(r),Array.from(e.entries()).reduce(((e,[n,s])=>(t.includes(n)||(e[n]=p("item",[s],r)),e)),{})}function Ee(e,t){if((0,d.isBoolean)(e.$ignore)&&e.$ignore)return!0;let r=e?.$hooks?.alter("ignore",!1,[t]);return r||(!1!==t.groups?e?.$hooks?.alter("groups",!1,[t.groups]):r)}function Re(e,t,r){if(!t?.isNullable)return e;let n=[].concat(e.type).filter(Boolean);switch(r.specType){default:case ne.JSON:e.discriminator||(e.oneOf?function(e){return e.oneOf.find((e=>"null"===e.type))}(e)||e.oneOf.unshift({type:"null"}):e.type=(0,d.uniq)(["null",...n]));break;case ne.OPENAPI:e.nullable=!0,e.oneOf||(n.length>1?(e.oneOf=n.map((e=>({type:e}))),delete e.type):e.type=n[0])}return e}function Te(e,t){const{specType:r,operationIdFormatter:n,root:s,components:o,genericTypes:i,nestedGenerics:a,useAlias:c,genericLabels:u,...h}=t;return Object.entries(e).reduce(((r,[n,s])=>{if(!1!==t.withIgnoredProps&&!Ee(s,h)){const o={...t,groups:e?.$forwardGroups||s?.$forwardGroups?t.groups:void 0};r[n]=p("item",[s],o),r[n]=Re(r[n],s,o)}return r}),(0,d.isArray)(e)?[]:{})}function Ae(e,t,r){return e.map((e=>p("item",[e],{...t,genericLabels:r.genericLabels})))}function we(e,t,r){return e.isClass?p("class",[e],t):p("any",[e],{...t,genericLabels:r.genericLabels})}function Pe(e,t){return Object.entries(e).reduce(((e,[r,n])=>(e[r=t.get(r)||r]=n,e)),{})}function Ce(e,t,r){return e.oneOf&&!1!==r.groups&&(e={...e,oneOf:t.$hooks.alter("oneOf",e.oneOf,[r.groups])}),!(e.oneOf||e.allOf||e.anyOf)||e.items||e.properties||delete e.type,e}function Me(e,t,r){return!1!==r.groups?t?.$hooks?.alter("requiredGroups",e,[r.groups]):e}function _e(e,t,r){if(r.groups&&r.groups.includes("partial"))return e.discriminator?{...e,required:[e.discriminator.propertyName]}:e;let n=function(e,t,r){let n=e.required||[];return n=[...n,...t.$required],t.get("properties")&&(n=Object.entries(t.get("properties")).reduce(((e,[t,r])=>r&&void 0!==r.$selfRequired?r.$selfRequired?e.concat(t):e.filter((e=>e===t)):e),n)),Me((0,d.uniq)(n),t,r)}(e,t,r);return n=(0,d.uniq)(n).reduce(function(e,t,r={}){const{useAlias:n}=r,s=Object.keys(e.properties||{});return(r,o)=>{const i=n&&t.alias.get(o)||o;if(s.includes(i)){const n=t.get("properties")[o],s=e.properties[i];return e.properties[i]=function(e,t){if(!t?.$allow.includes("")&&[].concat(t?.get("type")).includes("string")){const t=e?.minLength;if(void 0===t)return{...e,minLength:1}}return e}(s,n),r.concat(i)}return r}}(e,t,r),[]),e.discriminator&&n.push(e.discriminator.propertyName),n.length?{...e,required:n}:e}function xe(e,t,r){return r.inlineEnums&&e.enum?.$isJsonDocument&&(e.enum=e.enum.toJSON().enum),e.enum&&(e.type="object"===e.type||void 0===e.type?"string":e.type),e}c("any",me),c("class",ye),c("generics",ge),c("inheritedClass",Oe),c("item",be),c("lazyRef",ve),c("map",Se),c("object",Te),c("anyOf",Ae),c("allOf",Ae),c("oneOf",Ae),c("properties",we),c("items",we),c("additionalProperties",we),c("propertyNames",we),c("contains",we),c("dependencies",we),c("patternProperties",we),c("additionalItems",we),c("not",we),c("definitions",we);const ke=["name","$required","$hooks","_nestedGenerics",ne.OPENAPI,ne.SWAGGER,ne.JSON],$e=["const"];function De(e,t){const{options:r,addDef:n}=function(e){let t=!1;e||(t=!0,e={components:{schemas:{}},inlineEnums:!0});const{useAlias:r=!0,components:n={schemas:{}}}=e;return{addDef:t,options:e={...e,useAlias:r,components:n}}}(t),s=function(e,t){let r=function(e,t){const{useAlias:r}=t;return[...e.keys()].filter((e=>!function(e,{specType:t=ne.JSON,customKeys:r=!1}){return ke.includes(e)||e.startsWith("#")&&(!1===r||t!==ne.JSON)||t!==ne.JSON&&$e.includes(e)}(e,t))).reduce(((n,s)=>{let o=e.get(s);if("type"===(s=s.replace(/^#/,"")))return{...n,[s]:e.getJsonType()};if(function(e,t,r){return"examples"===e&&(0,d.isObject)(t)&&[ne.OPENAPI,ne.ASYNCAPI].includes(r.specType)}(s,o,t)&&(s="example",o=Object.values(o)[0]),o&&"object"==typeof o&&h(s)){if(o=p(s,[o],t,e),function(e,t){return"object"==typeof t&&["items","properties","additionalProperties"].includes(e)&&0===Object.keys(t).length}(s,o))return n;(function(e,t,r){return"object"==typeof t&&r&&["properties","additionalProperties"].includes(e)})(s,o,r)&&(o=Pe(o,e.alias))}return{...n,[s]:o}}),{})}(e,t);return e.isClass&&(r=p("inheritedClass",[r],{...t,root:!1,target:e.getComputedType()})),r=p("generics",[r],{...t,root:!1}),e.has(t.specType)&&(r={...r,...e.get(t.specType).toJSON(t)}),r=_e(r,e,t),r=Re(r,e,t),r=Ce(r,e,t),r=xe(r,0,t),r}(e,r);return n&&Object.keys((0,d.getValue)(r,"components.schemas",{})).length&&(s.definitions=r.components.schemas),s}function Ne(e,t){const r={paths:p("paths",[e],t={...t,specType:ne.OPENAPI})};return r.tags=(0,d.uniqBy)(t.tags,"name"),Object.keys((0,d.getValue)(t,"components.schemas",{})).length&&(r.components={schemas:t.components.schemas}),r}function je(e,{jsonSchema:t}){const r={type:"string",format:"binary",oneOf:void 0};return"array"===t.type?(t.items=(0,d.cleanObject)({...t.items,...r}),e.schema=t,e):(e.schema=(0,d.cleanObject)({...t,...r}),e)}function Ie(e,r){const n=function(e,t={}){return{...t,groups:e.groups,groupsName:e.groupsName}}(e,r),s={...n.components?.schemas||{}},{type:o,schema:i,...a}=p("map",[e],n),c=p("item",[e.$schema],{...n,...ce(e)});a.required=a.required||e.get("in")===N.PATH;const u={...n,jsonSchema:c,jsonParameter:e,oldSchemas:s},l=(0,t.camelCase)(`operationIn ${e.get("in")}`);return h(l)?p(l,[a],u):(a.schema=c,a)}function Le(e,t){return e.flatMap((e=>p("operationInParameter",[e],t))).filter(Boolean)}function He(e,t){if(!t)return;let r=!1;const n=Object.entries(t).reduce(((t,[n,{value:s,description:o,...i}])=>void 0===s[e]?t:(r=!0,{...t,[n]:{...i,value:s[e],description:o}})),{});return r?n:void 0}function Ue(e,{jsonSchema:t,jsonParameters:r,...n}){if(t.$ref){if(!e.name)return function(e,{jsonParameter:t,...r}){const n=le(t.$schema.getName(),r),s=r.components?.schemas?.[n];return s&&!r.oldSchemas?.[n]&&delete r.components.schemas[t.$schema.getName()],Object.entries(s?.properties||{}).reduce(((t,[r,{description:n,...o}])=>[...t,(0,d.cleanObject)({...e,name:r,required:(s?.required||[]).includes(r),description:n,schema:o,style:o.$ref?"deepObject":void 0,examples:He(r,e.examples)})]),[])}(e,n);e.style="deepObject"}return e.schema=t,e}c("schema",De),c("generate",Ne,ne.OPENAPI),c("generate",Ne,ne.SWAGGER),c("operationInFiles",je),c("operationInParameter",Ie),c("operationInParameters",Le),c("operationInQuery",Ue);var Ge=s(203),Be=s.n(Ge);const qe=Be().codes.reduce(((e,r)=>{const n=String(Be()(r));return{...e,[String(r)]:{label:n,code:(0,t.constantCase)(n)}}}),{});function Fe(e){return qe[e]?.code}function Ke(e){return qe[e]?.label}function Ve(e,{tags:t=[],defaultTags:r=[],...n}={}){const{consumes:s,produces:o,...i}=p("map",[e],{...n,ignore:["parameters"]});i.security&&(i.security=[].concat(i.security)),0===e.get("responses").size&&(i.responses={200:{description:Ke(200)}});const a={...n,consumes:e.get("consumes")?.length?e.get("consumes"):["application/json"]},[c,u]=function(e,t){return e.get("parameters").filter((e=>I(e.get("in")))).reduce(((e,t)=>{const[r,n]=e;return[N.BODY,N.FILES].includes(t.get("in"))?[r,[...n,t]]:[[...r,t],n]}),[[],[]])}(e);i.parameters=p("operationInParameters",[c],n),u.length&&(i.requestBody=p("operationRequestBody",[u],a));const h=i.tags?.length?i.tags:r;return h.length&&(i.tags=h.map((({name:e})=>e))),t.push(...h),i}function Je(e,t){return p("map",[e],{...t,groups:[...e.groups||[]],groupsName:e.groupsName})}qe[200].label="Success",qe[200].code="SUCCESS",c("operation",Ve),c("operationMedia",Je);class We extends D{$kind="operationRequestBody";constructor(e={}){super(e),this.content(e.content||{})}description(e){return this.set("description",e),this}content(e){return this.set("content",F(e)),this}addContent(e,t,r){const n=this.get("content"),s=new D;return s.set("schema",t),r&&s.set("examples",r),n.set(e,s),this}required(e){return this.set("required",e),this}}function ze(e,{consumes:t,...r}){const{schema:n,examples:s,in:o,...i}=function(e,t){let r=new M;const n={},s=[];let o=0;const i=e.some((e=>"files"===e.get("in")));return e.forEach((e=>{const a=e.getName();[...e.entries()].filter((([e])=>!["in","name"].includes(e))).forEach((([e,t])=>{void 0===n[e]&&(n[e]=t)}));const c=p("operationInParameter",[e],t);if(a){const t={...c.schema||{type:c.type}};i&&c.description&&(t.description=c.description),r.addProperty(a,t),e.get("required")&&r.addRequired(a),o++}else s.push(c)})),o||1!==s.length?(r.type("object"),n.description&&i&&delete n.description,{schema:r.toJSON(t),required:!1,...n}):s[0]}(e,r),a=new We(i);return t.forEach((e=>{a.addContent(e,n,s)})),p("map",[a],r)}function Xe(e,t={}){const r=p("map",[e],t);return 204===e.status&&delete r.content,r.headers&&Object.entries(r.headers).forEach((([e,{type:t,...n}])=>{r.headers[e]={...n,schema:{type:t}}})),r}function Qe(e,t){return e.map((e=>t.parameters.find((t=>t.in===e.in&&t.name===e.name))||e)).concat(...t.parameters.filter((e=>"path"!==e.in)))}function Ye(e,t=""){t instanceof RegExp&&(t=t.toString().replace(/^\//g,"").replace(/\/$/g,"").replace(/\\/g,""));const r=[],n=[];let s=!1,o="";return function(e){let t=0;return e.split("").filter((e=>{"("===e&&t++;const r=0===t;return")"===e&&t--,r})).join("").split("/").filter((e=>!!e))}(`${e}${t}`).map((e=>{const t=e.replace(":","").replace("?","");if(e.includes(":")){const i=e.includes("?");i&&!s&&(s=!0,n.push({path:o,parameters:[].concat(r)}));const{prefix:a,name:c,postfix:u}=function(e){const[t,r]=e.split("="),n=(r||t).split(".");return{prefix:r&&t?`${t}=`:"",name:n.splice(0,1)[0],postfix:n.length?`.${n.join(".")}`:""}}(t);o+=`/${a}{${c}}${u}`,r.push({in:"path",name:c,type:"string",required:!0}),i&&s&&n.push({path:o,parameters:[].concat(r)})}else o+=`/${e}`})),n.length?n:[{path:o,parameters:[].concat(r)}]}function Ze(e=""){const r=new Map;return(n,s,o="")=>{const i=((r,n)=>{const s=(e||"%c.%m").replace(/%c/,r).replace(/%m/,n);return""===e?(0,t.camelCase)(s):s})(n,s),a=n+s;if(!r.has(a))return r.set(a,0),i;const c=o.match(/{(\w+)}/gi);if(c){const e=n+s+c[0];if(!r.has(e))return r.set(e,0),(0,t.camelCase)(`${i} By ${c}`)}const u=r.get(a)+1;return r.set(a,u),`${i}_${u}`}}function et(e,{store:t,operationIdFormatter:r}){return r(t.parent.schema.get("name")||t.parent.targetName,t.propertyName,e)}c("operationRequestBody",ze),c("operationResponse",Xe);const tt=[e.ALL,e.GET,e.POST,e.PUT,e.PATCH,e.HEAD,e.OPTIONS,e.DELETE,e.TRACE];function rt(e,{path:t,method:r,operation:n}){return{...e,[t]:{...e[t],[r.toLowerCase()]:n}}}function nt(e,{paths:t,rootPath:r,...n}){const s=f(r+X(e).path);return n={...n,ctrlRootPath:s},[...Z(e).values()].filter(ee).filter((e=>e.operation.getAllowedOperationPath(tt).length>0)).flatMap(function(e){return t=>{const r=t.operation.getAllowedOperationPath(tt);if(0===r.length)return[];const n=p("operation",[t.operation],e);return r.map((e=>({operationPath:e,operation:n,operationStore:t})))}}(n)).flatMap(function(e){return({operationPath:t,operation:r,operationStore:n})=>{const{path:s,method:o}=t;return Ye(e.ctrlRootPath,s).map((({path:t,parameters:s})=>(t=t||"/",s=Qe(s.map((({type:e,...t})=>({...t,schema:{type:e}}))),r),{operation:{...r,parameters:s,operationId:r.operationId||et(t,{...e,store:n})},method:o,path:t})))}}(n)).reduce(rt,t)}function st(e){return(...t)=>{const r=e(X(...t),t);"function"==typeof r&&r(...t)}}function ot(...e){return st((t=>{t.store.set("childrenControllers",e),e.forEach((e=>{d.Store.from(e).set("parentController",t.token)}))}))}function it(e,...r){return st((n=>{e=e||(0,t.snakeCase)(n.targetName),n.discriminatorAncestor&&n.schema.discriminatorValue(e,...r)}))}function at(e,t){if(!e)throw new Error("A type is required on `@CollectionOf(type)` decorator. Please give a type or wrap it inside an arrow function if you have a circular reference.");const r={};let n=!1;const s=(...s)=>{const o=y.from(...s);t&&(o.collectionType=t,o.schema.type(t)),o.type=e,o.itemSchema.type(e),o.schema.assign(r),o.isArray&&n&&(o.schema.set("contains",o.schema.get("items")),o.schema.delete("items"))};return s.MinItems=e=>(r.minItems=e,s),s.MaxItems=e=>(r.maxItems=e,s),s.MinProperties=e=>(r.minProperties=e,s),s.MaxProperties=e=>(r.maxProperties=e,s),s.Contains=()=>(n=!0,s),s.UniqueItems=(e=!0)=>(r.uniqueItems=e,s),s}function ct(e){return at(e,Array)}function ut(e){return at(e,Map)}function pt(e){return at(e).Contains()}function ht(e){return st((t=>{const r=t.parentSchema.get("#errorMessage")||{};t.parentSchema.customKey("errorMessage",{...r,...e})}))}function lt(e,t){const r={};return(...n)=>{const s=(0,d.useDecorators)(t(...n));return s.Error=t=>(r.message=t,(0,d.useDecorators)(s,r.message&&ht({[e]:t}))),s}}c("paths",nt);const ft=lt("maxItems",(e=>{if(e<0)throw new Error("The value of maxItems MUST be a non-negative integer.");return st((t=>{t.schema.maxItems(e)}))})),dt=lt("maxProperties",(e=>{if(e<0)throw new Error("The value of maxProperties MUST be a non-negative integer.");return st((t=>{t.isCollection?t.schema.maxProperties(e):t.itemSchema.maxProperties(e)}))})),mt=lt("minItems",(e=>{if(e<0)throw new Error("The value of minItems MUST be a non-negative integer.");return st((t=>{t.schema.minItems(e)}))})),yt=lt("minProperties",(e=>{if(e<0)throw new Error("The value of minProperties MUST be a non-negative integer.");return st((t=>{t.isCollection?t.schema.minProperties(e):t.itemSchema.minProperties(e)}))})),gt=lt("uniqueItems",((e=!0)=>st((t=>{t.schema.uniqueItems(e)}))));function Ot(e){return st(((t,r)=>{t.itemSchema.additionalProperties(e)}))}function bt(...e){return st((t=>{t.itemSchema.allOf(e)}))}function vt(e){return st((t=>{e&&(((0,d.isClass)(e)||(0,d.isArrowFn)(e))&&(t.type=e),t.itemSchema.type(e))}))}function St(...e){const t=e.find((e=>(0,d.isClass)(e)));return(0,d.useDecorators)(t&&vt(t),st(((t,r)=>{t.schema.allow(...e),t.decoratorType===d.DecoratorTypes.PARAM&&(t.required=!0),t.decoratorType===d.DecoratorTypes.PROP&&t.parentSchema.addRequired(t.propertyName)})))}function Et(...e){return st((t=>{t.itemSchema.any(...e)}))}function Rt(...e){return st((t=>{t.itemSchema.anyOf(e)}))}function Tt(e){return st((t=>{t.itemSchema.const(e)}))}function At(e,t){return st((r=>{r.itemSchema.customKey(e,t)}))}function wt(e){return st((t=>{Object.entries(e).forEach((([e,r])=>{t.itemSchema.customKey(e,r)}))}))}function Pt(e){return st((t=>{t.itemSchema.default(e)}))}function Ct(e){return(0,d.useDecorators)(ht({_:e}))}function Mt(e){return st(((t,r)=>{switch((0,d.decoratorTypeOf)(r)){case d.DecoratorTypes.PROP:case d.DecoratorTypes.CLASS:t.schema.description(e);break;case d.DecoratorTypes.PARAM:t.parameter.description(e);break;case d.DecoratorTypes.METHOD:t.operation?.description(e)}}))}function _t(){return(0,d.useDecorators)(vt(),st((e=>{e.discriminatorKey()})))}const xt=lt("enum",(function(e,...t){return st((r=>{r.itemSchema.enum(e,...t)}))}));function kt(...e){return st((t=>{t.schema.examples(e)}))}function $t(e){return st((t=>{t.parameter.examples(e)}))}const Dt=lt("maximum",((e,t=!1)=>st((r=>{t?r.itemSchema.exclusiveMaximum(e):r.itemSchema.maximum(e)})))),Nt=Dt,jt=lt("exclusiveMaximum",((e,t=!0)=>Dt(e,t))),It=lt("minimum",((e,t=!1)=>st((r=>{t?r.itemSchema.exclusiveMinimum(e):r.itemSchema.minimum(e)})))),Lt=It,Ht=lt("exclusiveMinimum",((e,t=!0)=>It(e,t)));var Ut;!function(e){e.DATE_TIME="date-time",e.DATE="date",e.TIME="time",e.EMAIL="email",e.HOSTNAME="hostname",e.IPV4="ipv4",e.IPV6="ipv6",e.URI="uri",e.URL="url",e.URI_REF="uri-reference",e.URI_TEMPLATE="uri-template",e.JSON_POINTER="json-pointer",e.RELATIVE_JSON_POINTER="relative-json-pointer",e.UUID="uuid",e.REGEX="regex"}(Ut||(Ut={}));const Gt=lt("format",(e=>st((t=>{t.itemSchema.format(e)})))),Bt=lt("format",(()=>Gt(Ut.EMAIL))),qt=lt("format",(()=>Gt(Ut.DATE_TIME))),Ft=lt("format",(()=>Gt(Ut.DATE))),Kt=lt("format",(()=>Gt(Ut.TIME))),Vt=lt("format",(()=>Gt(Ut.URI))),Jt=lt("format",(()=>Gt(Ut.URL)));function Wt(e=!0){return st((t=>{t.schema.$forwardGroups=e}))}var zt=s(133),Xt=s.n(zt);function Qt(e,t){t=[].concat(t),e=[].concat(e);let r=new Set,n=new Set,s=new Set,o=0,i=e=>{s.add(e.output)};for(let s=0;s<t.length;s++){let a=Xt()(String(t[s]),{onResult:i},!0),c=a.state.negated||a.state.negatedExtglob;c&&o++;for(let t of e){let e=a(t,!0);(c?!e.isMatch:e.isMatch)&&(c?r.add(e.output):(r.delete(e.output),n.add(e.output)))}}return!!(o===t.length?[...s]:[...n]).filter((e=>!r.has(e))).length}function Yt(e,t=[]){const r=e.filter((e=>e.startsWith("!"))).map((e=>e.replace("!",""))),n=e.filter((e=>!e.startsWith("!")));return!!(r.length&&t.length&&Qt(r,t))||!!n.length&&!Qt(e.filter((e=>!e.startsWith("!"))),t)}function Zt(...e){return st((t=>{switch(t.decoratorType){case d.DecoratorTypes.CLASS:!function(e,t){const r=Object.entries(e[0]);t.children.forEach((e=>{Zt(...r.filter((([,t])=>t.includes(e.propertyName))).map((([e])=>e)))(e.target,e.propertyKey)}))}(e,t);break;case d.DecoratorTypes.PROP:t.schema.$hooks.on("groups",((t,r)=>!(t||!Yt(e,r))||t));break;case d.DecoratorTypes.PARAM:let r="";2==e.length&&(0,d.isArray)(e[1])&&(r=e[0],e=e[1]),t.parameter.groups=e,t.parameter.groupsName=r}}))}function er(){return(0,d.StoreSet)("hidden",!0)}function tr(e=!0){return st((t=>{t.schema.ignore(e)}))}function rr(){return st((e=>{e.itemSchema.type("integer")}))}const nr=lt("maxLength",(e=>{if(e<0)throw new Error("The value of maxLength MUST be a non-negative integer.");return st((t=>{t.itemSchema.maxLength(e)}))})),sr=lt("minLength",(e=>{if(e<0)throw new Error("The value of minLength MUST be a non-negative integer.");return st((t=>{t.itemSchema.minLength(e)}))})),or=lt("multipleOf",(e=>{if(e<=0)throw new Error("The value of multipleOf MUST be a number, strictly greater than 0.");return st((t=>{t.itemSchema.multipleOf(e)}))}));function ir(e){return st(((t,r)=>{switch((0,d.decoratorTypeOf)(r)){case d.DecoratorTypes.CLASS:t.schema.name(e);break;case d.DecoratorTypes.PARAM:t.parameter.name(e);break;default:t.parent.schema.addAlias(r[1],e)}}))}function ar(e,...t){return t=[e,...t],(0,d.useDecorators)(1===t.length&&vt(t[0]),Et(null,...t))}function cr(...e){return st((t=>{t.itemSchema.oneOf(e),t.type=Object}))}function ur(){return st((e=>{switch(e.decoratorType){case d.DecoratorTypes.PARAM:e.required=!1;break;case d.DecoratorTypes.PROP:e.parentSchema.removeRequired(e.propertyName)}}))}const pr=lt("pattern",(e=>st((t=>{t.itemSchema.pattern(e)}))));function hr(e=!0){return st((t=>{t.itemSchema.readOnly(e)}))}function lr(e){return st((t=>{Object.entries(e).forEach((([e,r])=>{t.schema.set(e,r)}))}))}function fr(e,t){return st((r=>{r.schema.set(e,t)}))}function dr(e,...t){return lr({properties:{...t.reduce(((t,r)=>({...t,[r]:e})),{})}})}const mr=lt("required",((e=!0,...t)=>e?St(...t):ur()));function yr(...e){return st((t=>{t.parent.schema.$hooks.on("requiredGroups",((r,n)=>Yt(e,n)?r.filter((e=>e!==t.propertyKey)):r))}))}function gr(e){return st((t=>{t.schema.title(e)}))}function Or(e){return st((()=>(0,d.useDecorators)(ht({type:e}))))}function br(e=!0){return st((t=>{t.itemSchema.writeOnly(e)}))}function vr(e=Object){if((0,d.isClass)(e)){const{schema:t}=X(e);return t.properties=function(t){return Object.entries(t).forEach((([t,r])=>{X(e.prototype,t).schema.assign(r)})),this},t}return M.from({type:e})}function Sr(){return vr(Number)}function Er(){return vr(Number).integer()}function Rr(){return vr(String)}function Tr(){return vr(Boolean)}function Ar(){return vr(Date).format(Ut.DATE)}function wr(){return vr(Date).format(Ut.DATE_TIME)}function Pr(){return vr(Date).format(Ut.TIME)}function Cr(){return vr(String).format(Ut.EMAIL)}function Mr(){return vr(String).format(Ut.URI)}function _r(){return vr(String).format(Ut.URL)}function xr(){return vr(Array)}function kr(){return vr(Map).unknown(!0)}function $r(){return vr(Array).uniqueItems(!0)}function Dr(e={}){return vr(Object).properties(e)}function Nr(...e){return vr().any(...e)}function jr(...e){return vr().anyOf(e)}function Ir(...e){return vr().oneOf(e)}function Lr(...e){return vr().allOf(e)}function Hr(e){try{if(e())return y.from(e()).schema}catch(e){}return new he(e)}function Ur(e){const t=Rr().enum(e);return b.set(e,t),t}function Gr(...e){const t=[e.map((e=>function(e){return(0,d.isObject)(e)&&!("toJSON"in e)}(e)?Rr().enum(Object.values(e)):e))],r=(...e)=>{y.from(...e).nestedGenerics=t};return r.Nested=(...e)=>(t.push(e),r),r}function Br(...e){return t=>{y.from(t).schema.genericLabels=e}}function qr(...e){return st(((t,r)=>{switch(t.decoratorType){case d.DecoratorTypes.METHOD:t.operation.produces(e);break;case d.DecoratorTypes.CLASS:(0,d.decorateMethodsOf)(r[0],qr(...e));break;default:throw new d.UnsupportedDecoratorType(qr,r)}}))}function Fr(...e){return(0,d.useDecorators)(qr(...e),(0,d.StoreSet)("acceptMimes",e))}function Kr(...e){return st(((t,r)=>{switch(t.decoratorType){case d.DecoratorTypes.METHOD:t.operation.consumes(e);break;case d.DecoratorTypes.CLASS:(0,d.decorateMethodsOf)(r[0],Kr(...e));break;default:throw new d.UnsupportedDecoratorType(Kr,r)}}))}class Vr extends Map{methods;decoratorType;entity;actions=[];constructor(e={}){super(),Object.entries(e).forEach((([e,t])=>{this.set(e,t)}))}addAction(e){return this.actions.push(e),this}build(){const e=(...t)=>this.bind(t,e),r=t=>{return r=(...e)=>{t in this?this[t](...e):this.set(t,e[0])},(...t)=>(r(...t),e);var r};return this.methods.forEach((n=>{e[(0,t.pascalCase)(n)]=r(n)})),e}toObject(){return[...this.entries()].reduce(((e,[t,r])=>({...e,[t]:r})),{})}getMergedKey(e,t){let r=this.get(e)||t;if(r)return this.decoratorType===d.DecoratorTypes.CLASS&&(r={...r,...t||{}}),{...t||{},...r}}bind(e,t){this.entity=y.from(...e),this.beforeInit(),this.onInit(e,t),this.afterInit()}onInit(e,t){this.forEach(((e,t)=>{this.onMapKey(t,e)}))}onMapKey(e,t){this.entity.set(e,t)}runActions(){return this.actions.forEach((e=>{e(this)})),this}beforeInit(){}afterInit(){}}const Jr=new Map;function Wr(e,t){Jr.set(e,t)}function zr(e){return Jr.get(e)}function Xr(e){return e.map((e=>function(e){return(0,d.isObject)(e)&&!("toJSON"in e)}(e)?Rr().enum(Object.values(e)):e))}class Qr extends Vr{methods=["contentType","description","examples","type","status","of","ofInteger","oneOf","allOf","anyOf","nested","header","headers","schema","title","groups","allowedGroups","location"];constructor({status:e,model:t}){super(),this.model(t),this.status(e)}type(e){return this.model(e)}model(e){return e&&this.set("model",e),this}status(e){return this.set("status",e),e&&Ke(e)&&!this.get("description")&&(this.set("description",Ke(e)),this.get("model")||this.model(zr(+e))),this}headers(e){return this.set("headers",{...this.get("headers")||{},...q(e)}),this}header(e,t){return void 0===t&&(0,d.isString)(e)?this.headers({[e]:{type:"string"}}):this.headers({[e]:t})}location(e,t={}){return this.headers({Location:{...t,value:e}}),this}groups(...e){return 2===e.length&&(0,d.isArray)(e[1])?(this.set("groupsName",e[0]),this.set("groups",e[1])):this.set("groups",e),this}allowedGroups(...e){return this.set("allowedGroups",new Set(e)),this}nested(...e){const t=this.get("model");return this.checkPrimitive(t),this.checkCollection(t),this.addAction((t=>{this.get("schema").nestedGenerics.push(Xr(e))})),this}of(...e){const t=this.get("model");return this.checkPrimitive(t),this.addAction((()=>{const r=this.get("schema");(0,d.isCollection)(t)?r?.itemSchema({type:e[0]}):r?.nestedGenerics.push(Xr(e))})),this}ofInteger(){return this.of("integer")}oneOf(...e){return this.manyOf("oneOf",e)}allOf(...e){return this.manyOf("allOf",e)}anyOf(...e){return this.manyOf("anyOf",e)}schema(e){return this.addAction((()=>{this.get("schema").assign(e)})),this}examples(e){return this.set("examples",(0,d.isString)(e)?[e]:e),this}title(e){return this.schema({title:e})}checkPrimitive(e){if((0,d.isPrimitiveOrPrimitiveClass)(e))throw new Error("Returns.Of cannot be used with the following primitive classes: String, Number, Boolean")}checkCollection(e){if((0,d.isCollection)(e))throw new Error("Returns.Nested cannot be used with the following classes: Map, Set, Array, String, Number, Boolean")}getContentType(){const e=this.get("model");let t=this.get("contentType");return!e||(0,d.isPlainObject)(e)||(0,d.isPrimitiveOrPrimitiveClass)(e)||(t=t||"application/json"),t}getStatus(){return this.get("status")||"default"}onInit(e,t){switch((0,d.decoratorTypeOf)(e)){case d.DecoratorTypes.METHOD:this.entity=y.from(...e),this.entity.operation&&this.map();break;case d.DecoratorTypes.CLASS:this.decoratorType=d.DecoratorTypes.CLASS,(0,d.decorateMethodsOf)(e[0],t)}}map(){const e=this.get("model"),{entity:t,decoratorType:r}=this,n=this.entity.operation,s=this.getStatus(),o=n.ensureResponseOf(s),i=this.getContentType();let{description:a=o.get("description")}=this.toObject();a&&(a=r===d.DecoratorTypes.CLASS&&o.get("description")||a,o.description(a));const c=this.getMergedKey("headers",o.get("headers"));return c&&o.headers(c),this.mapMedia(o),(G(this.get("status"))||"default"===s)&&e&&(t.type=e),i&&n.addProduce(i),this.runActions()}mapMedia(e){const t=this.getContentType(),r=this.get("model"),n=e.getMedia(t||"*/*"),s=n.get("schema")||new M({type:r}),o=this.get("groups"),i=this.get("groupsName"),a=this.get("allowedGroups"),c=this.entity.operation;if(r&&((0,d.isArray)(r)?s.oneOf(r.map((e=>({type:e})))):s.type(r)),this.set("schema",s),n.schema(s),n.groups=o,n.groupsName=i,a){n.allowedGroups=a;const e=new L;e.in("query").name("includes"),e.schema(M.from({type:"array",items:{type:"string",enum:[...a]}})),c.addParameter(-1,e)}const u=this.get("examples");return u&&n.examples(u),n}manyOf(e,t){const r=this.get("model");return this.addAction((()=>{const n=this.get("schema");(0,d.isCollection)(r)?(n.type(r||Object),n.itemSchema().set(e,t)):n.set(e,t)})),this}}function Yr(e,t){return new Qr({status:e,model:t}).build()}function Zr(e){return Yr().ContentType(e)}function en(e=!0){return st(((t,r)=>{switch((0,d.decoratorTypeOf)(r)){case d.DecoratorTypes.METHOD:t.operation.deprecated(e);break;case d.DecoratorTypes.CLASS:(0,d.decorateMethodsOf)(r[0],en(e));break;case d.DecoratorTypes.PARAM:t.parameter.set("deprecated",e);break;case d.DecoratorTypes.PROP:t.schema.set("deprecated",e);break;default:throw new d.UnsupportedDecoratorType(en,r)}}))}function tn(e,t){return void 0!==t&&(e={[e]:t}),void 0===t&&(0,d.isString)(e)&&(e={[e]:{type:"string"}}),Yr().Headers(e)}function rn(e){const t=new L,r={},n=(s,o,i)=>{const a=y.from(s,o,i);switch(a.decoratorType){case d.DecoratorTypes.PARAM:a.parameter.in(e);break;case d.DecoratorTypes.METHOD:t.in(e),a.operation.addParameter(-1,t),t.schema(M.from(r));break;case d.DecoratorTypes.CLASS:(0,d.decorateMethodsOf)(s,n);break;default:throw new d.UnsupportedDecoratorType(rn,[s,o,i])}};return n.Type=e=>(r.type=e,n),n.Name=e=>(t.name(e),n),n.Description=e=>(t.description(e),n),n.Required=(e=!0)=>(t.required(e),n),n.Pattern=e=>n.Schema({pattern:e.toString()}),n.Schema=e=>(Object.assign(r,e),n),n}function nn(e){return(...t)=>{const[r,n,s]=t,o=d.Metadata.getParamTypes(r,n)[s]===Array,i=[e="object"==typeof e?void 0:e,!o&&"0"].filter(Boolean).join(".");(0,d.useDecorators)(rn(N.FILES),ir(i),(0,d.useMethodDecorators)(Yr(400).Description("<File too long | Too many parts | Too many files | Field name too long | Field value too long | Too many fields | Unexpected field>  [fieldName] Example: File too long file1"),Kr("multipart/form-data")))(...t)}}function sn(e,t){return Yr().Location(e,t)}const on=new Set([...Object.keys(e).filter((t=>t!==e.CUSTOM)).map((e=>e.toLowerCase()))]);function an(e){let t,r;const n=e.filter((e=>"string"==typeof e&&on.has(e.toLowerCase())?(t=e.toLocaleUpperCase(),!1):"string"==typeof e||e instanceof RegExp?(r=e||"/",!1):!!e));return{path:r,method:t,use:n}}class cn extends Vr{methods=["name","description","summary","method","id","use","useAfter","useBefore"];beforeInit(){const t=this.get("path"),r=e[this.get("method")]||e.CUSTOM;t&&this.entity.operation.addOperationPath(r,t)}onMapKey(e,t){switch(e){case"name":case"id":return void this.entity.operation.operationId(t);case"summary":return void this.entity.operation.summary(t);case"description":return void this.entity.operation.description(t);case"use":return void this.entity.use(t);case"useAfter":return void this.entity.after(t);case"useBefore":return void this.entity.before(t)}return super.onMapKey(e,t)}}function un(...e){const t=an(e);return new cn(t).build()}function pn(e){return st(((t,r)=>{if(t.decoratorType!==d.DecoratorTypes.METHOD)throw new d.UnsupportedDecoratorType(pn,r);t.operation.operationId(e)}))}function hn(e,t="/"){return st(((r,n)=>{if(r.decoratorType!==d.DecoratorTypes.METHOD)throw new d.UnsupportedDecoratorType(hn,n);r.operation.addOperationPath(e.toUpperCase(),t)}))}function ln(){return Zt("partial")}function fn(e){return st(((t,r)=>{if(t.decoratorType!==d.DecoratorTypes.CLASS)throw new d.UnsupportedDecoratorType(fn,r);t.path=e}))}function dn(t){return un(e.PUBLISH,t)}function mn(...e){const{status:t,url:r,meta:n}=e.reduce(((e,t)=>(0,d.isNumber)(t)?(e.status=t,e):(0,d.isString)(t)?(e.url=t,e):(e.meta=t,e)),{status:302,url:"",meta:{}});return(0,d.useDecorators)(Yr(t).Location(r,n),st((e=>{e.operation?.setRedirection(t)})))}const yn=un;function gn(t="/",...r){return un(...[e.ALL,t].concat(r))}function On(t="/",...r){return un(...[e.GET,t].concat(r))}function bn(t="/",...r){return un(...[e.POST,t].concat(r))}function vn(t="/",...r){return un(...[e.PUT,t].concat(r))}function Sn(t="/",...r){return un(...[e.DELETE,t].concat(r))}function En(t="/",...r){return un(...[e.HEAD,t].concat(r))}function Rn(t="/",...r){return un(...[e.PATCH,t].concat(r))}function Tn(t="/",...r){return un(...[e.OPTIONS,t].concat(r))}function An(e,...t){return st(((r,n)=>{switch(r.decoratorType){case d.DecoratorTypes.METHOD:r.operation.addSecurityScopes(e,t);break;case d.DecoratorTypes.CLASS:(0,d.decorateMethodsOf)(n[0],An(e,...t));break;default:throw new d.UnsupportedDecoratorType(An,n)}}))}function wn(e,t){return Yr(e,t)}function Pn(t){return un(e.SUBSCRIBE,t)}function Cn(e){return st(((t,r)=>{if(t.decoratorType!==d.DecoratorTypes.METHOD)throw new d.UnsupportedDecoratorType(Cn,r);t.operation.summary(e)}))}function Mn(...e){return st(((t,r)=>{switch(t.decoratorType){case d.DecoratorTypes.METHOD:t.operation.addTags(function(e){return e.map((e=>"string"==typeof e?{name:e}:e))}(e));break;case d.DecoratorTypes.CLASS:(0,d.decorateMethodsOf)(r[0],Mn(...e));break;default:throw new d.UnsupportedDecoratorType(Mn,r)}}))}function _n(e,t){return(0,d.StoreSet)("view",{path:e,options:t})}function xn(e,t){if(e instanceof RegExp||t instanceof RegExp){if(!e)return t;if(!t)return e;const r=e instanceof RegExp?e:new RegExp(e,"gi"),n=t instanceof RegExp?t:new RegExp(t,"gi");return new RegExp(r.source+n.source,(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":""))}e&&t&&e.endsWith("/")&&t.startsWith("/")&&(t=t.slice(1));const r=(e||"")+(t||"");return r.endsWith("/")&&r.length>1?r.slice(0,-1):r}class kn{token;endpoint;operationPath;basePath;paramsTypes;constructor(e){Object.assign(this,e),this.paramsTypes=this.endpoint.getParamTypes()}get url(){return this.fullPath}get path(){return this.operationPath?.path}get fullPath(){return xn(this.basePath,this.path)}get method(){return this.operationPath?.method||"USE"}get name(){return`${this.endpoint.targetName}.${this.methodClassName}()`}get className(){return this.endpoint.targetName}get methodClassName(){return this.propertyKey}get parameters(){return this.endpoint.parameters}get propertyKey(){return String(this.endpoint.propertyKey)}get propertyName(){return this.endpoint.propertyName}get store(){return this.endpoint.store}get operation(){return this.endpoint.operation}get operationId(){return this.operation.get("operationId")||this.endpoint.propertyKey}has(e){return this.paramsTypes[e]}}const $n=(0,d.mergeReducerBuilder)(((e,t)=>e.type&&e.type===t.type||e.$ref&&e.$ref===t.$ref)),Dn=(0,d.mergeReducerBuilder)(((e,t)=>e.in===t.in&&e.name===t.name)),Nn=(0,d.mergeReducerBuilder)(((e,t)=>!!Object.keys(t).find((t=>!!e[t])))),jn=(0,d.mergeReducerBuilder)(((e,t)=>e.name===t.name)),In={security:Nn,parameters:Dn,oneOf:$n,anyOf:$n,allOf:$n,tags:jn};function Ln(e,t){return(0,d.deepMerge)(e,t,{reducers:In,cleanUndefinedProps:!0})}const Hn=new Map;function Un(e,t={}){if(t={specType:ne.OPENAPI,...t,tags:[],paths:{},channels:{},components:{},operationIdFormatter:t.operationIdFormatter||Ze(t.operationIdPattern),root:!1},(0,d.isArray)(e)){let r={};return t={...t,append(e){r=Ln(r,e)}},e.forEach((({token:e,...r})=>{const n=Un(e,{...t,...r});t.append(n)})),r}return function(e,t,r){Hn.has(e)||Hn.set(e,new Map);const n=Hn.get(e),s=JSON.stringify(t);return n.has(s)||n.set(s,r()),n.get(s)}(e,t,(()=>function(e,t){const r=X(e),{rootPath:n="/"}=t;return t={...t,rootPath:n,defaultTags:[(0,d.cleanObject)({name:r.schema.getName(),description:r.schema.get("description")})]},p("generate",[r],t)}(e,t)))}function Gn(e){return e.startsWith("3.")?ne.OPENAPI:ne.SWAGGER}function Bn(e){return"openapi"in e?ne.OPENAPI:ne.SWAGGER}function qn(e){const{title:t,description:r,version:n,termsOfService:s,contact:o,license:i}=e;return(0,d.cleanObject)({version:n,title:t,description:r,termsOfService:s,contact:o,license:i})}function Fn(e,{version:t,specVersion:r,acceptMimes:n=["application/json"]}){const{paths:s,security:o,tags:i,host:a,basePath:c,schemes:u,consumes:p=[],produces:h=["application/json"],definitions:l,parameters:f,responses:m,securityDefinitions:y,externalDocs:g}=e;return{swagger:r,consumes:(0,d.uniq)([...n,...p]),produces:(0,d.uniq)([...h]),info:qn((0,d.getValue)(e,"info",{})),paths:s,host:a,basePath:c,schemes:u,definitions:l,parameters:f,responses:m,security:o,securityDefinitions:y,tags:i,externalDocs:g}}function Kn(e,{specVersion:t}){const{servers:r,paths:n,components:s,security:o,tags:i,externalDocs:a}=e;return{openapi:t,info:qn((0,d.getValue)(e,"info",{})),servers:r,paths:n,components:s,security:o,tags:i,externalDocs:a}}function Vn(e,{fileSpec:t,acceptMimes:r,specVersion:n,version:s}){const o={specVersion:n=n||(0,d.getValue)(e,"openapi",(0,d.getValue)(e,"swagger","2.0")),acceptMimes:r};switch(Gn(n)){case ne.OPENAPI:e=Kn(e,o),t=t?Kn(t,o):t;break;default:case ne.SWAGGER:e=Fn(e,o),t=t?Fn(t,o):t}return e=Ln(e,t),(0,d.setValue)(e,"info.title",(0,d.getValue)(e,"info.title","Api documentation")),(0,d.setValue)(e,"info.version",(0,d.getValue)(e,"info.version",s)),e}const Jn=["get","put","post","delete","options","head","patch","trace"],Wn=["format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","minLength","maxLength","multipleOf","minItems","maxItems","uniqueItems","minProperties","maxProperties","additionalProperties","pattern","enum","default"],zn=["type","items"],Xn=/^(application\/json|[^;\/ \t]+\/[^;\/ \t]+[+]json)[ \t]*(;.*)?$/,Qn={APPLICATION_X_WWW_URLENCODED:"application/x-www-form-urlencoded",MULTIPART_FORM_DATA:"multipart/form-data"};function Yn(e){if(Array.isArray(e))e.forEach(Yn);else if("object"==typeof e)for(let t in e)"$ref"===t?e.$ref=e.$ref.replace("#/components/schemas/","#/definitions/").replace("#/components/","#/x-components/"):Yn(e[t])}function Zn(e){return new RegExp(Xn,"i").test(e)}function es(e){const t=Object.keys(Qn).map((e=>Qn[e]));return Object.keys(e).filter((e=>t.indexOf(e)>-1||Zn(e)))}function ts(e){function t(e){const{scheme:t,type:r,name:n,bearerFormat:s,flows:o,...i}=e;switch(r){case"http":if("basic"===t)return{...i,type:t};if("bearer"===t)return{...i,type:"apiKey",name:"Authorization",in:"header"};break;case"oauth2":const e=Object.keys(o)[0],n=o[e];let s=e;return"clientCredentials"===s?s="application":"authorizationCode"===s&&(s="accessCode"),{type:r,flow:s,authorizationUrl:n.authorizationUrl,tokenUrl:n.tokenUrl,scopes:n.scopes}}}return Object.entries(e).reduce(((e,[r,n])=>({...e,[r]:t(n)})),{})}function rs(e){let t=e.url;const r=e.variables||{};for(const e in r){const n=r[e]||{};if(n.default){const r=RegExp(`{${e}}`,"g");t=t.replace(r,n.default)}}const n=new URL(t);return{host:n.host?n.host:void 0,basePath:n.pathname,schemes:null!==n.protocol?[n.protocol.substring(0,n.protocol.length-1)]:void 0}}class ns{spec;constructor(e){this.spec=JSON.parse(JSON.stringify(e))}convertInfos(){const e=this.spec.servers&&this.spec.servers[0];return e?rs(e):{}}resolveReference(e,t,r){if(!t||!t.$ref)return t;const n=t.$ref;if(n.startsWith("#")){const t=n.split("/").map((e=>e.replace(/~1/g,"/").replace(/~0/g,"~")));t.shift();let s=e;return t.forEach((e=>{s=s[e]})),r?JSON.parse(JSON.stringify(s)):s}}convert(){const e={swagger:"2.0",...this.convertInfos(),paths:this.spec.paths?this.convertOperations(this.spec.paths,this.spec):void 0};return this.spec.components&&(this.convertSchemas(),this.convertSecurityDefinitions(),this.spec["x-components"]=this.spec.components,delete this.spec.components,Yn(this.spec)),delete this.spec.servers,delete this.spec.openapi,delete this.spec["x-components"],(0,d.cleanObject)({...e,...this.spec})}convertOperations(e,t){return Object.entries(e).reduce(((e,[r,n])=>{const s=e[r]=this.resolveReference({...t,paths:e},n,!0);return this.convertParameters(s),Object.keys(s).forEach((r=>{if(Jn.indexOf(r)>=0){const n=s[r]=this.resolveReference({...t,paths:e},s[r],!0);this.convertOperationParameters(n),this.convertResponses(n)}})),e}),e)}convertOperationParameters(e){let t,r,n,s;if(e.parameters=e.parameters||[],e.requestBody){let o=this.resolveReference(this.spec,e.requestBody,!0);if(e.requestBody.content){const t=es(e.requestBody.content)[0],r={content:{}},n=e.requestBody.content[t];n&&n.schema&&n.schema.$ref&&!n.schema.$ref.startsWith("#")&&(o=this.resolveReference(this.spec,n.schema,!0),r.content[`${t}`]={schema:o},o=r)}if(o.name="body",t=o.content,t&&Object.keys(t).length){if(n=Object.keys(t).filter((e=>e.indexOf("/")>0)),s=n.filter((e=>e.indexOf("*")<0)),r=es(t)[0],delete o.content,[Qn.APPLICATION_X_WWW_URLENCODED,Qn.MULTIPART_FORM_DATA].includes(r))if(e.consumes=s,o.in="formData",o.schema=t[r].schema,o.schema=this.resolveReference(this.spec,o.schema,!0),"object"===o.schema.type&&o.schema.properties){const t=o.schema.required||[];Object.keys(o.schema.properties).forEach((r=>{const n=o.schema.properties[r];if(!n.readOnly){const s={name:r,in:"formData",schema:n};t.indexOf(r)>=0&&(s.required=!0),e.parameters?.push(s)}}))}else e.parameters.push(o);else r?(e.consumes=s,o.in="body",o.schema=t[r].schema,e.parameters.push(o)):n&&(e.consumes=s||["application/octet-stream"],o.in="body",o.name=o.name||"file",delete o.type,o.schema=t[n[0]].schema||{type:"string",format:"binary"},e.parameters.push(o));o.schema&&this.convertSchema(o.schema,"request")}delete e.requestBody}this.convertParameters(e)}convertParameters(e){void 0!==e.parameters&&(e.parameters=e.parameters||[],(e.parameters||[]).forEach(((t,r)=>{if("body"!==(t=e.parameters[r]=this.resolveReference(this.spec,t,!1)).in){if(this.copySchemaProperties(t,Wn),this.copySchemaProperties(t,zn),this.copySchemaXProperties(t),!t.description){const e=this.resolveReference(this.spec,t.schema,!1);e&&e.description&&(t.description=e.description)}void 0!==t.example&&(t["x-example"]=t.example),delete t.schema,delete t.allowReserved,delete t.example}if("array"===t.type)switch(t.style||("query"===t.in||"cookie"===t.in?"form":"simple")){case"matrix":t.collectionFormat=t.explode?void 0:"csv";break;case"label":t.collectionFormat=void 0;break;case"simple":t.collectionFormat="csv";break;case"spaceDelimited":t.collectionFormat="ssv";break;case"pipeDelimited":t.collectionFormat="pipes";break;case"deepOpbject":t.collectionFormat="multi";break;case"form":t.collectionFormat=!1===t.explode?"csv":"multi"}delete t.style,delete t.explode})))}copySchemaProperties(e,t){let r=this.resolveReference(this.spec,e.schema,!0);r&&t.forEach((t=>{const n=r[t];"additionalProperties"===t&&"boolean"==typeof n||void 0!==n&&(e[t]=n)}))}copySchemaXProperties(e){let t=this.resolveReference(this.spec,e.schema,!0);t&&Object.keys(t).forEach((r=>{Reflect.hasOwnProperty.call(t,r)&&!Reflect.hasOwnProperty.call(e,r)&&r.startsWith("x-")&&(e[r]=t[r])}))}convertResponses(e){Object.keys(e.responses||{}).forEach((t=>{const r=e.responses[t]=this.resolveReference(this.spec,e.responses[t],!0);if(r.content){let t=null,n=null;if(Object.keys(r.content).forEach((s=>{const o=s.indexOf("*")<0?s:"application/octet-stream";e.produces?e.produces.indexOf(o)<0&&e.produces.push(o):e.produces=[o];const i=r.content[s];t=t||i.schema,!n&&Zn(o)&&(n=i.schema),i.example&&(r.examples=r.examples||{},r.examples[o]=i.example)})),t){r.schema=n||t;const e=this.resolveReference(this.spec,r.schema,!0);e&&r.schema.$ref&&!r.schema.$ref.startsWith("#")&&(r.schema=e),this.convertSchema(r.schema,"response")}}Object.keys(r.headers||{}).forEach((e=>{const t=this.resolveReference(this.spec,r.headers[e],!0);t.schema&&(t.type=t.schema.type,t.format=t.schema.format,delete t.schema),r.headers[e]=t})),delete r.content}))}convertSchema(e,t){if(e.oneOf&&(delete e.oneOf,e.discriminator&&delete e.discriminator),e.anyOf&&(delete e.anyOf,e.discriminator&&delete e.discriminator),e.allOf)for(const r in e.allOf)this.convertSchema(e.allOf[r],t);switch(e.discriminator&&(e.discriminator.mapping&&this.convertDiscriminatorMapping(e.discriminator.mapping),e.discriminator=e.discriminator.propertyName),e.type){case"object":e.properties&&Object.keys(e.properties).forEach((r=>{!0===e.properties[r].writeOnly&&"response"===t?delete e.properties[r]:(this.convertSchema(e.properties[r],t),delete e.properties[r].writeOnly)}));break;case"array":e.items&&this.convertSchema(e.items,t)}e.nullable&&(e["x-nullable"]=!0,delete e.nullable),void 0!==e.deprecated&&(void 0===e["x-deprecated"]&&(e["x-deprecated"]=e.deprecated),delete e.deprecated)}convertSchemas(){this.spec.definitions=this.spec.components.schemas,Object.keys(this.spec.definitions||{}).forEach((e=>{this.convertSchema(this.spec.definitions[e])})),delete this.spec.components.schemas}convertDiscriminatorMapping(e){Object.keys(e).forEach((t=>{const r=e[t];if("string"!=typeof r)return void console.warn(`Ignoring ${r} for ${t} in discriminator.mapping.`);let n;if(/^[a-zA-Z0-9._-]+$/.test(r))try{n=this.resolveReference(this.spec,{$ref:`#/components/schemas/${r}`},!1)}catch(e){console.debug(`Error resolving ${r} for ${t} as schema name in discriminator.mapping: ${e}`)}if(!n)try{n=this.resolveReference(this.spec,{$ref:r},!1)}catch(e){console.debug(`Error resolving ${r} for ${t} in discriminator.mapping: ${e}`)}n?(n["x-discriminator-value"]=t,n["x-ms-discriminator-value"]=t):console.warn(`Unable to resolve ${r} for ${t} in discriminator.mapping.`)}))}convertSecurityDefinitions(){this.spec.components.securitySchemes&&(this.spec.securityDefinitions=ts(this.spec.components.securitySchemes),delete this.spec.components.securitySchemes)}}function ss(e){return new ns(e).convert()}async function os({tokens:e,...t}){const{version:r="1.0.0",acceptMimes:n,specPath:s,specVersion:o}=t,i=Vn((0,d.getValue)(t,"spec",{}),{fileSpec:{},version:r,specVersion:o,acceptMimes:n}),a=Bn(i),c=Ln(i,Un(e,t));return a===ne.SWAGGER?ss(c):c}const is="$cache:schemes";function as(e,t={}){const r=X(e),n=t.specType||ne.JSON;return t={endpoint:!0,groups:[],inlineEnums:n===ne.JSON,...t,specType:n,components:{schemas:{}}},"parameter"===r.decoratorType&&(t={...t,genericTypes:r.nestedGenerics[0],nestedGenerics:r.nestedGenerics,groups:r.parameter?.groups}),function(e,t){const r=e.store.get(is)||new Map,n=function(e){return JSON.stringify(e)}(t);if(!r.has(n)){const s=p("schema",[e.schema],t);Object.keys((0,d.getValue)(t,"components.schemas",{})).length&&(s.definitions=t.components.schemas),r.set(n,s)}return e.store.set(is,r),r.get(n)}(r,t)}function cs(e,t={}){const r=e.isStore?e:X(e),n=xn(t.basePath,r.path);let s=[];return t.withChildren&&(s=r.get("childrenControllers",[]).reduce(((e,r)=>e.concat(cs(r,{...t,basePath:n}))),s)),[...Z(e).values()].reduce(((r,s)=>{const{operation:o}=s;return o&&o.getAllowedOperationPath(t.allowedVerbs).forEach((t=>{r.push(new kn({basePath:n,token:e,endpoint:s,operationPath:t}))})),r}),s)}function us(e){const t=e.isStore?e:X(e);if(!t.$properties){const e=Y(t);t.$properties=new Map,e.forEach((e=>{e.children.forEach((e=>{t.$properties.has(e.propertyKey)||t.$properties.set(e.propertyKey,e)}))}))}return t.$properties}function ps(e,t={}){const r=us(e),n=new Map;return r.forEach(((e,r)=>{!t.withIgnoredProps&&Ee(e.itemSchema,t)||n.set(r,e)})),n}})(),o})(),e.exports=n(r(550),r(886))}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{Configuration:()=>l,Constant:()=>f,Container:()=>j,Controller:()=>R,ControllerProvider:()=>I,DIConfiguration:()=>q,DI_PARAMS:()=>t,DI_PARAM_OPTIONS:()=>s,GlobalProviderRegistry:()=>O,GlobalProviders:()=>b,INJECTABLE_PROP:()=>e,Inject:()=>h,Injectable:()=>T,InjectablePropertyType:()=>o,InjectionError:()=>G,InjectorService:()=>X,Intercept:()=>A,Interceptor:()=>w,InvalidPropertyTokenError:()=>a,LOGGER:()=>Q,LazyInject:()=>P,LocalsContainer:()=>L,Module:()=>M,OptionalLazyInject:()=>C,Opts:()=>x,OverrideProvider:()=>k,Provider:()=>g,ProviderScope:()=>d,ProviderType:()=>m,Scope:()=>_,Service:()=>$,UndefinedTokenError:()=>B,UseOpts:()=>D,Value:()=>N,colors:()=>U,createContainer:()=>F,getConfiguration:()=>Z,getConstructorDependencies:()=>c,getTokens:()=>V,injectProperty:()=>p,mergeMount:()=>Y,registerController:()=>E,registerProvider:()=>v,registerValue:()=>S,resolveControllers:()=>W,setConstructorDependencies:()=>u});const e="DI:INJECTABLE_PROP",t="DI:PARAMS",s="DI:PARAM:OPTIONS";var o,i=r(886);class a extends Error{name="INVALID_TOKEN_ERROR";constructor(e,t){super(`Object isn't a valid token. Please check the token set on ${(0,i.nameOf)((0,i.classOf)(e))}.${t}.\n- Check that it is not a circular reference.\n- Check that the token (class or symbol) exists`)}}function c(e,t){return i.Metadata.getOwn("override:ctor:design:paramtypes",e,t)||[...i.Metadata.getParamTypes(e,t)]||[]}function u(e,t){i.Metadata.set("override:ctor:design:paramtypes",t,e)}function p(t,r,n){i.Store.from(t).merge(e,{[r]:{bindingType:i.DecoratorTypes.PROP,propertyKey:r,...n}})}function h(e,t=(e=>e)){return(r,n,o)=>{switch((0,i.decoratorTypeOf)([r,n,o])){case i.DecoratorTypes.PARAM_CTOR:if(e){const t=c(r,n),s=t[o];t[o]=s===Array?[e]:e,i.Metadata.setParamTypes(r,n,t),u(r,t)}break;case i.DecoratorTypes.PROP:const l=e||i.Metadata.getType(r,n);if(l===Object)throw new a(r,String(n));p(r,String(n),{resolver(o,a,{options:c,...u}){const p=i.Metadata.getType(r,n);if(a.set(s,{...c}),p===Array){let r;return r||(r=o.getMany(e,a,u),a.delete(s)),r.forEach(((e,t)=>{(0,i.isPromise)(r)&&e.then((e=>{r[t]=e}))})),()=>t(r)}let h;return h||(h=o.invoke(l,a,u),a.delete(s)),(0,i.isPromise)(h)&&h.then((e=>{h=e})),()=>t(h)}});break;default:throw new i.UnsupportedDecoratorType(h,[r,n,o])}}}function l(e={}){return(...t)=>{switch((0,i.decoratorTypeOf)(t)){case i.DecoratorTypes.CLASS:(0,i.StoreSet)("configuration",e)(t[0]);break;default:case i.DecoratorTypes.PARAM_CTOR:return h(l)(t[0],t[1],t[2])}}}function f(t,r){return(n,s)=>{i.Store.from(n).merge(e,{[s]:{bindingType:o.CONSTANT,propertyKey:s,expression:t,defaultValue:r}})}}!function(e){e.METHOD="method",e.PROPERTY="property",e.CONSTANT="constant",e.VALUE="value",e.INTERCEPTOR="interceptor"}(o||(o={}));var d,m,y=r(917);!function(e){e.SINGLETON="singleton",e.REQUEST="request",e.INSTANCE="instance"}(d||(d={})),function(e){e.VALUE="value",e.FACTORY="factory",e.SERVICE="service",e.PROVIDER="provider",e.MODULE="module",e.CONTROLLER="controller",e.INTERCEPTOR="interceptor",e.MIDDLEWARE="middleware"}(m||(m={}));class g{type=m.PROVIDER;deps;imports;alias;useFactory;useAsyncFactory;useValue;hooks;_useClass;_provide;_store;_tokenStore;constructor(e,t={}){this.provide=e,this.useClass=e,Object.assign(this,t)}get token(){return this._provide}get provide(){return this._provide}set provide(e){e&&(this._provide=(0,i.getClassOrSymbol)(e),this._tokenStore=this._store=i.Store.from(e))}get useClass(){return this._useClass}set useClass(e){(0,i.isClass)(e)&&(this._useClass=(0,i.classOf)(e),this._store=i.Store.from(e),this.hooks=(0,i.methodsOf)(this._useClass).reduce(((e,{propertyKey:t})=>String(t).startsWith("$")?{...e,[t]:(e,...r)=>e[t](...r)}:e),{}))}get className(){return this.name}get name(){return(0,i.nameOf)(this.provide)}get store(){return this._store}get path(){return this.store.get("path","/")}set path(e){this.store.set("path",e)}get scope(){return this.isAsync()?d.SINGLETON:this.get("scope")}set scope(e){this.store.set("scope",e)}get configuration(){return this.get("configuration")}set configuration(e){this.store.set("configuration",e)}get children(){return this.store.get("childrenControllers",[])}get(e){return this.store.get(e)||this._tokenStore.get(e)}isAsync(){return!!this.useAsyncFactory}clone(){return new((0,i.classOf)(this))(this._provide,this)}hasChildren(){return!!this.children.length}hasParent(){return!!this.store.get("parentController")}toString(){return["Token",this.name,this.useClass&&(0,i.nameOf)(this.useClass),this.useFactory&&"Factory",this.useValue&&"Value",this.useAsyncFactory&&"AsyncFactory"].filter(Boolean).join(":")}}class O extends Map{#l=new Map;get(e){return super.get((0,i.getClassOrSymbol)(e))}has(e){return super.has((0,i.getClassOrSymbol)(e))}set(e,t){return super.set((0,i.getClassOrSymbol)(e),t),this}merge(e,t){const r=this.createIfNotExists(e,t);return Object.keys(t).forEach((e=>{r[e]=t[e]})),this.set(e,r),r}delete(e){return super.delete((0,i.getClassOrSymbol)(e))}createRegistry(e,t,r={}){const n=this.getRegistrySettings(e);return r=Object.assign(n,{...r,model:t}),this.#l.set(e,r),this}onInvoke(e,t,r){const n=this.#l.get(e.type);n?.onInvoke&&n.onInvoke(e,t,r)}getRegistrySettings(e){let t="provider";if("string"==typeof e)t=e;else{const r=this.get(e);r&&(t=r.type)}return this.#l.get(t)||{model:g}}createRegisterFn(e){return(t,r)=>{t=Object.assign({instance:r},t,{type:e}),this.merge(t.provide,t)}}createIfNotExists(e,t){const r=t.type||m.PROVIDER;if(!this.has(e)){const{model:n=g}=this.#l.get(r)||{},s=new n(e,t);this.set(e,s)}return this.get(e)}}const b=new O;function v(e){if(!e.provide)throw new Error("Provider.provide is required");return b.merge(e.provide,e)}b.createRegistry(m.CONTROLLER,g);const S=(e,t)=>{e.provide||(e={provide:e}),e=Object.assign({scope:d.SINGLETON,useValue:t},e,{type:m.VALUE}),b.merge(e.provide,e)},E=b.createRegisterFn(m.CONTROLLER);function R(e){const{children:t=[],path:r,...n}=function(e){return"string"==typeof e||e instanceof RegExp||(0,i.isArrayOrArrayClass)(e)?{path:e}:e}(e);return(0,i.useDecorators)((e=>{E({provide:e,...n})}),r&&(0,y.Path)(r),(0,y.Children)(...t))}function T(e={}){return t=>{v({...e,...e.provide?{useClass:t}:{provide:t}})}}function A(t,r){return(...n)=>{const[s,a,c]=n;switch((0,i.decoratorTypeOf)(n)){case i.DecoratorTypes.CLASS:(0,i.decorateMethodsOf)(s,A(t,r));break;case i.DecoratorTypes.METHOD:return i.Store.from(s).merge(e,{[a]:{options:r,propertyKey:a,useType:t,bindingType:o.INTERCEPTOR}}),c}}}function w(){return T({type:m.INTERCEPTOR})}function P(e,t,{optional:r=!1,packageName:n=t.toString()}={}){return(s,o)=>{let a,c;p(s,o,{resolver:s=>async()=>{if(!c){const o=await(0,i.importPackage)(n,t,r);if(c=o[e],!c&&!r)throw new Error(`Unable to lazy load the "${e}". The token isn't a valid token provider.`);a=c?await s.lazyInvoke(c):{}}return a}})}}function C(e,t){return P(e,t,{optional:!0})}function M(e={}){const{scopes:t,imports:r,resolvers:n,deps:s,scope:o,...a}=e;return(0,i.useDecorators)(l(a),T({type:m.MODULE,scope:d.SINGLETON,imports:r,deps:s,injectable:!1,resolvers:n}))}function _(e=d.REQUEST){return(0,i.StoreSet)("scope",e)}function x(e,t,r){_(d.INSTANCE)((0,i.classOf)(e)),h(s)(e,t,r)}function k(e){return t=>{b.get(e).useClass=t}}function $(){return T()}function D(t){return(r,n,o)=>{switch((0,i.decoratorTypeOf)([r,n,o])){case i.DecoratorTypes.PARAM_CTOR:i.Store.from(r).merge(`${s}:${o}`,t);break;case i.DecoratorTypes.PROP:i.Store.from(r).merge(e,{[n]:{options:t}});break;default:throw new i.UnsupportedDecoratorType(D,[r,n,o])}}}function N(t,r){return(n,s)=>{i.Store.from(n).merge(e,{[s]:{bindingType:o.VALUE,propertyKey:s,expression:t,defaultValue:r}})}}class j extends Map{add(e,t={}){const r=b.get(e)?.clone()||new g(e);return Object.assign(r,t),super.set(e,r)}addProvider(e,t={}){return this.add(e,t)}hasProvider(e){return super.has(e)}setProvider(e,t){return super.set(e,t)}getProvider(e){return super.get(e)}getProviders(e){const t=[].concat(e);return[...this].reduce(((r,[n,s])=>t.includes(s.type)||!e?[...r,s]:r),[])}addProviders(e){e.forEach((e=>{this.hasProvider(e.provide)||this.setProvider(e.provide,e.clone())}))}}class I extends g{tokenRouter;constructor(e,t={}){super(e,t),this.type=m.CONTROLLER}get middlewares(){return Object.assign({use:[],useAfter:[],useBefore:[]},this.store.get("middlewares",{}))}set middlewares(e){const t=this.middlewares;Object.keys(e).forEach((r=>{((e,t,r)=>{t[e]=t[e].concat(r[e])})(r,t,e)})),this.store.set("middlewares",t)}}class L extends Map{hooks=new i.Hooks;async destroy(){await this.hooks.asyncEmit("$onDestroy")}}const H=e=>e=>(process.env.NO_COLOR,e),U={red:H(),yellow:H(),green:H()};class G extends Error{name="INJECTION_ERROR";tokens=[];origin;constructor(e,t){super((0,i.isString)(t)?t:""),this.tokens=[e],t&&((0,i.isString)(t)?this.origin={message:t,stack:this.stack}:t.tokens?(this.tokens=this.tokens.concat(t.tokens),this.origin=t.origin):(this.origin=t,this.stack=t.stack));const r=this.origin?"\nOrigin: "+this.origin.message:"",n=this.tokens.map((e=>(0,i.nameOf)(e))).join(" > ");this.message=`Injection failed on ${n}${r}`}static throwInjectorError(e,t,r){throw t&&(0,i.isClass)(e)&&(r.message=function(e,t){let r="";const n=(0,i.getConstructorArgNames)(e).map(((e,n)=>(t.index===n&&(r=e,e=U.red(e)),`${e}: ${(0,i.nameOf)(t.deps[n])}`))).join(", "),s=(0,i.nameOf)(e)+"->constructor("+n+")",o=s.indexOf(r)-5;return"Unable to inject dependency. "+t.message+"\n\n"+s+"\n"+(o>-1?(e=>" ".repeat(e)+U.red("^"+"".repeat(r.length-1)))(o):"")}(e,{...t,message:r.message})),new G(e,r)}}class B extends Error{name="UNDEFINED_TOKEN_ERROR";constructor(){super("Given token is undefined. Have you enabled emitDecoratorMetadata in your tsconfig.json or decorated your class with @Injectable, @Service, ... decorator ?")}}class q{default=new Map;map=new Map;constructor(e={}){return Object.entries({scopes:{},resolvers:[],imports:[],routes:[],logger:{},...e}).forEach((([e,t])=>{this.default.set(e,t)})),(0,i.proxyDelegation)(this,{ownKeys:e=>[...e.default.keys(),...e.map.keys()]})}get version(){return this.get("version")}set version(e){this.map.set("version",e)}get rootDir(){return this.get("rootDir")}set rootDir(e){this.map.set("rootDir",e)}get env(){return this.map.get("env")}set env(e){this.map.set("env",e)}get scopes(){return this.map.get("scopes")}set scopes(e){this.map.set("scopes",e)}get resolvers(){return this.getRaw("resolvers")}set resolvers(e){this.map.set("resolvers",e)}get imports(){return this.get("imports")}set imports(e){this.map.set("imports",e)}get routes(){return this.get("routes")}set routes(e){this.map.set("routes",e)}get logger(){return this.get("logger")}set logger(e){const t={...this.logger,...e};this.map.set("logger",t)}get debug(){return"debug"===this.logger.level}set debug(e){this.logger={...this.logger,level:e?"debug":"info"}}forEach(e,t){return new Set([...Array.from(this.default.keys()),...Array.from(this.map.keys())]).forEach((t=>{e(this.getRaw(t),t,this.map)}),t)}set(e,t){return"string"==typeof e?Reflect.has(this,e)?this[e]=t:this.setRaw(e,t):Object.entries(e).forEach((([e,t])=>{this.set(e,t)})),this}setRaw(e,t){return(0,i.setValue)(this.map,e,t),this}get(e,t){return this.getRaw(e,t)}resolve(e){return e.replace("${rootDir}",this.rootDir)}getRaw(e,t){const r=(0,i.getValue)(this.map,e);return void 0!==r?r:(0,i.getValue)(this.default,e,t)}}function F(e){const t=new j(b.entries());return e&&t.delete(e),t}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const K=["mount","imports"];function V(e){return e?(0,i.isArray)(e)?e.filter(i.isClass).map((e=>({token:e}))):Object.keys(e).reduce(((t,r)=>[...t,...[].concat(e[r]).filter(i.isClass).map((e=>({route:r,token:e})))]),[]):[]}function J(e){return e.map((({token:e})=>b.get(e))).filter((e=>e?.type===m.MODULE&&e.configuration)).flatMap((e=>W(e.configuration)))}function W(e){const t=K.flatMap((t=>V(e[t])));return[...J(t),...t].filter((e=>!!e.route))}var z;let X=z=class extends j{settings=new q;logger=console;resolvedConfiguration=!1;#f=new L;#d=new i.Hooks;constructor(){super(),this.#f.set(z,this)}get resolvers(){return this.settings.resolvers}get scopes(){return this.settings.scopes||{}}scopeOf(e){return e.scope||this.scopes[e.type]||d.SINGLETON}toArray(){return[...this.#f.values()]}get(e,t={}){const r=this.getInstance(e);if(void 0!==r)return r;if(!this.hasProvider(e))for(const r of this.resolvers){const n=r.get(e,t);if(void 0!==n)return n}}getMany(e,t,r){return this.getProviders(e).map((e=>this.invoke(e.token,t,r)))}has(e){return void 0!==this.#f.get(e)}alias(e,t){return this.#f.set(t,this.#f.get(e)),this}invoke(e,t,r={}){let n=t?t.get(e):void 0;if(void 0!==n)return n;if(e===l)return this.settings;if(n=r.rebuild?void 0:this.getInstance(e),null!=n)return n;if(e===s)return{};const o=this.ensureProvider(e),a=t=>{this.#f.set(e,t),o?.alias&&this.alias(e,o.alias)};if(!o||r.rebuild)return n=this.resolve(e,t,r),this.hasProvider(e)&&a(n),n;switch(n=this.resolve(e,t,r),this.scopeOf(o)){case d.SINGLETON:return o.hooks&&!r.rebuild&&this.registerHooks(o,n),o.isAsync()&&(0,i.isPromise)(n)?(a(n),n=n.then((e=>(a(e),e))),n):(a(n),n);case d.REQUEST:return t&&(t.set(e,n),o.hooks&&o.hooks.$onDestroy&&t.hooks.on("$onDestroy",((...e)=>o.hooks.$onDestroy(n,...e)))),n}return n}async loadAsync(){for(const[,e]of this)!this.has(e.token)&&e.isAsync()&&await this.invoke(e.token)}loadSync(){for(const[,e]of this)this.has(e.token)||this.scopeOf(e)!==d.SINGLETON||this.invoke(e.token)}bootstrap(e=F()){return this.addProviders(e),this.resolveConfiguration(),this.settings.imports=this.settings.imports?.filter((e=>e.token!==z)).map((e=>{if("token"in e&&"use"in e){const{token:t,use:r}=e,n=this.getProvider(t);if(n)return n.useValue=r,n.useFactory=void 0,n.useAsyncFactory=void 0,void(n.useClass=void 0)}return e})).filter(Boolean),this}loadModule(e){this.settings.routes=this.settings.routes.concat(W(this.settings));const t=F();return t.delete(e),t.addProvider(e,{type:"server:module",scope:d.SINGLETON}),this.load(t)}async load(e=F()){this.bootstrap(e),await this.loadAsync(),this.loadSync(),await this.emit("$beforeInit"),await this.emit("$onInit")}resolveConfiguration(){if(this.resolvedConfiguration)return;const e=new Map;super.forEach((t=>{t.configuration&&"server:module"!==t.type&&Object.entries(t.configuration).forEach((([t,r])=>{["resolvers","mount","imports"].includes(t)||(r=e.has(t)?(0,i.deepMerge)(e.get(t),r):(0,i.deepClone)(r),e.set(t,r))})),t.resolvers&&(this.settings.resolvers=this.settings.resolvers.concat(t.resolvers))})),e.forEach(((e,t)=>{this.settings.set(t,(0,i.deepMerge)(e,this.settings.get(t)))})),this.resolvedConfiguration=!0}bindInjectableProperties(t,r,n){const s=(0,i.ancestorsOf)((0,i.classOf)(t)).reduce(((t,r)=>({...t,...i.Store.from(r).get(e)||{}})),{});Object.values(s).forEach((e=>{switch(e.bindingType){case o.PROPERTY:this.bindProperty(t,e,r,n);break;case o.CONSTANT:this.bindConstant(t,e);break;case o.VALUE:this.bindValue(t,e);break;case o.INTERCEPTOR:this.bindInterceptor(t,e)}}))}bindProperty(e,{propertyKey:t,resolver:r,options:n={}},s,o){let a;a=r(this,s,{...o,options:n}),(0,i.catchError)((()=>Object.defineProperty(e,t,{get:a})))}bindValue(e,{propertyKey:t,expression:r,defaultValue:n}){const s={get:()=>this.settings.get(r)||n,set:e=>this.settings.set(r,e),enumerable:!0,configurable:!0};(0,i.catchError)((()=>Object.defineProperty(e,t,s)))}bindConstant(e,{propertyKey:t,expression:r,defaultValue:n}){let s;const o={get:()=>{if(void 0!==s)return s;const e=this.settings.get(r,n);return s=Object.freeze((0,i.deepClone)(e)),s},enumerable:!0,configurable:!0};(0,i.catchError)((()=>Object.defineProperty(e,t,o)))}bindInterceptor(e,{propertyKey:t,useType:r,options:n}){const s=(0,i.classOf)(e),o=e[t];e[t]=(...i)=>{const a=t=>{if(!t)return o.apply(e,i);throw t},c={target:s,propertyKey:t,args:i,options:n,next:a};return this.get(r).intercept({...c,options:n},a)}}async lazyInvoke(e){let t=this.getInstance(e);return t||(t=await this.invoke(e),(0,i.isFunction)(t?.$onInit)&&await t.$onInit()),t}emit(e,...t){return this.#d.asyncEmit(e,t)}alter(e,t,...r){return this.#d.alter(e,t,r)}alterAsync(e,t,...r){return this.#d.asyncAlter(e,t,r)}destroy(){return this.emit("$onDestroy")}ensureProvider(e){return!this.hasProvider(e)&&b.has(e)&&this.addProvider(e),this.getProvider(e)}getInstance(e){return this.#f.get(e)}resolve(e,t=new L,r={}){const n=this.mapInvokeOptions(e,t,r);if(!n)return;const{token:o,deps:a,construct:c,imports:u,provider:p}=n;let h;p&&b.onInvoke(p,t,{...n,injector:this});let l=!1;try{const e=e=>(n,o)=>{if(l={token:n,index:o,deps:a},n!==s){const e=p?.store?.get(`${s}:${o}`);t.set(s,e||{})}return(0,i.isArray)(n)?this.getMany(n[0],t,r):(0,i.isInheritedFrom)(n,g,1)?p:this.invoke(n,t,{parent:e})};u.forEach(e());const n=a.map(e(o));l=!1,h=c(n)}catch(e){G.throwInjectorError(o,l,e)}if(void 0===h)throw new G(o,`Unable to create new instance from undefined value. Check your provider declaration for ${(0,i.nameOf)(o)}`);return h&&(0,i.isClass)((0,i.classOf)(h))&&this.bindInjectableProperties(h,t,r),h}mapInvokeOptions(e,t,r){let n,o,a=r.imports,u=r.deps,p=r.scope;if(!e||e===Object)throw new B;if(this.hasProvider(e)?o=this.getProvider(e):(o=new g(e),this.resolvers.forEach((r=>{const n=r.get(e,t.get(s));void 0!==n&&(o.useFactory=()=>n)}))),p=p||this.scopeOf(o),u=u||o.deps,a=a||o.imports,void 0!==o.useValue)n=()=>(0,i.isFunction)(o.useValue)?o.useValue():o.useValue;else if(o.useFactory)n=e=>o.useFactory(...e);else if(o.useAsyncFactory)n=async e=>(e=await Promise.all(e),o.useAsyncFactory(...e));else{if(!o.useClass)return!1;u=u||c(o.useClass),n=e=>new o.useClass(...e)}return{token:e,scope:p||i.Store.from(e).get("scope")||d.SINGLETON,deps:u||[],imports:a||[],construct:n,provider:o}}registerHooks(e,t){e.hooks&&Object.entries(e.hooks).forEach((([r,n])=>{this.#d.on(r,((...r)=>n(this.get(e.token)||t,...r)))}))}};X=z=function(e,t,r,n){var s,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}([T({scope:d.SINGLETON,global:!0}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],X);const Q=Symbol.for("LOGGER");function Y(e={},t={}){return Object.entries(t).reduce(((e,[t,r])=>({...e,[t]:(e[t]||[]).concat(r)})),e)}function Z(e,t={}){const r=i.Store.from(e).get("configuration")||{};return{...r,...t,mount:Y(r.mount,t.mount)}}v({provide:Q,deps:[X],useFactory:e=>e.logger})})(),n})()));
//# sourceMappingURL=di.umd.min.js.map